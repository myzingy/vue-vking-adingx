webpackJsonp([1],{100:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0);!function(t){t&&t.__esModule}(n);e.default={props:["layer"],data:function(){return{}},mounted:function(){console.log("feedsMarkFormLayersItem.vue","mounted...",this.layer)},methods:{}}},101:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={prop:["text","textAlign","fontFamily","backgroundColor","textBackgroundColor"],style:["opacity","fill","fontWeight","textDecoration","stroke","strokeWidth","fontSize","lineHeight","charSpacing","fontStyle","angle"]},o={},a={};for(var r in n)for(var s in n[r]){var l=n[r][s];["opacity","strokeWidth","fontSize","lineHeight","charSpacing","angle"].indexOf(l)>-1?(o[l]=0,a[l]=0):(o[l]="",a[l]="")}e.default={props:["canvas","image"],data:function(){return{fields:n,object:o,objectSelected:!1,background:{size:100,position:{x:0,y:0}}}},mounted:function(){this.getObjectAll()},methods:{initPage:function(t){console.log("feedsMarkFormScope.vue","initPage...",t),Object.assign(this.object,a),this.background=t||{size:100,position:{x:0,y:0}}},updateScope:function(){this.canvas.renderAll(),this.getObjectAll()},getActiveProp:function(t){if(!this.canvas)return!1;var e=this.canvas.getActiveObject();return e?e[t]||"":""},setActiveProp:function(t,e){if(this.canvas){var i=this.canvas.getActiveObject();i&&(i.set(t,e).setCoords(),this.canvas.renderAll())}},getActiveStyle:function(t,e){return this.canvas?(e=e||this.canvas.getActiveObject(),e?e.getSelectionStyles&&e.isEditing?e.getSelectionStyles()[t]||"":e[t]||"":""):""},setActiveStyle:function(t,e,i){if(!this.canvas)return"";if(i=i||this.canvas.getActiveObject()){if(i.setSelectionStyles&&i.isEditing){var n={};n[t]=e,i.setSelectionStyles(n),i.setCoords()}else i.set(t,e);i.setCoords(),this.canvas.renderAll()}},getObjectAll:function(){if(console.log("getObjectAll...."),this.canvas){var t=this.canvas.getActiveObject();if(!t)return void(this.objectSelected=!1);this.objectSelected=!0,console.log("canvas.getActiveObject",t);for(var e in this.fields)for(var i in this.fields[e]){var n=this.fields[e][i],o="prop"==e?this.getActiveProp(n):this.getActiveStyle(n);this.object[n]=o||a[n]}return this.object.type=t.type,console.log("this.object",this.object),this.object}},formatOpacityTooltip:function(t){return 100*t+" %"},getVal:function(t){return this.fields.prop.indexOf(t)>-1?this.getActiveProp(t):this.getActiveStyle(t)},setVal:function(t,e){this.fields.prop.indexOf(t)>-1?this.setActiveProp(t,e):this.setActiveStyle(t,e)},setValOpacity:function(t){this.setVal("opacity",t)},setValTextBackgroundColor:function(t){this.setVal("textBackgroundColor",t)},setValStroke:function(t){this.setVal("stroke",t)},setValFill:function(t){this.setVal("fill",t)},setValStrokeWidth:function(t){this.setVal("strokeWidth",t)},setValFontFamily:function(t){this.setVal("fontFamily",t)},setValTextAlign:function(t){this.setVal("textAlign",t)},setValBackgroundColor:function(t){this.setVal("backgroundColor",t)},setValFontSize:function(t){this.setVal("fontSize",t)},setValLineHeight:function(t){this.setVal("lineHeight",t)},setValCharSpacing:function(t){this.setVal("charSpacing",t)},setValText:function(t){this.setVal("text",t)},setValAngle:function(t){this.setVal("angle",t)},toggleTextStyle:function(t){t=t.split(":"),this.getVal(t[0])?this.setVal(t[0],""):this.setVal(t[0],t[1])},removeObject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.canvas&&("ALL"==t&&confirm("Are you sure?")&&this.canvas.clear(),this.canvas.remove(this.canvas.getActiveObject()))},shadowify:function(){var t=this.canvas.getActiveObject();t&&(t.shadow?t.shadow=null:t.setShadow({color:"rgba(0,0,0,0.3)",blur:10,offsetX:10,offsetY:10}),this.canvas.renderAll())},setBackground:function(){this.$emit("setBackground")}}}},102:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),a=n(o),r=i(148),s=n(r);a.default.use(s.default,{preLoad:1.3,error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAA3NCSVQICAjb4U/gAAAABlBMVEX///+ZmZmOUEqyAAAAAnRSTlMA/1uRIrUAAAAJcEhZcwAACusAAArrAYKLDVoAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDkvMjAvMTIGkKG+AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAAB1JREFUCJljONjA8LiBoZyBwY6BQQZMAtlAkYMNAF1fBs/zPvcnAAAAAElFTkSuQmCC",loading:"http://img.zcool.cn/community/0161f656b0663e6ac7256cb052d31a.gif",attempt:0}),e.default={props:["viewImages"],data:function(){return{height:window.screen.height-300}},mounted:function(){},methods:{}}},117:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,"",""])},119:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,".layer-menu{z-index:9998;position:absolute;right:5px;bottom:5px;width:32px;height:30px;overflow:hidden;padding:5px;background-color:#9cf;cursor:pointer}.layer-menu i{font-size:30px;color:#fff}.layer{z-index:9999;position:absolute;right:0;bottom:0;width:330px;height:700px;padding:5px;display:none;overflow:hidden;background-color:#9cf;cursor:pointer}.layer .layer-header{font-size:30px;color:#fff}.layer .layer-content{height:620px;overflow-x:hidden;overflow-y:auto;background-color:#90c0f0;padding-bottom:8px}.layer.opened,.layer:hover{display:block}.layer .layer-footer{position:absolute;bottom:0;display:none}.layer .layer-item{background-color:#9cf;margin:8px 8px 0;max-height:50px;overflow:hidden}.layer .layer-item .image{background-size:auto 100%}.layer .layer-item *{padding:8px}",""])},121:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,".viewImageDialog img{background-color:#9cf;border:1px dashed #999;width:100%}img[lazy=loading]{background-color:#9fcfff}img[lazy=loaded]{background-color:#fff}img[lazy=error]{background-color:red}",""])},124:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,".el-slider{width:90%;margin-left:0;max-width:300px}#text-cmd-italic{font-style:italic}#text-cmd-underline{text-decoration:underline}#text-cmd-linethrough{text-decoration:line-through}#text-cmd-overline{text-decoration:overline}",""])},126:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,".canvas-view{border:1px solid #ccc;overflow:hidden;position:relative}.canvas-view-feeds .el-select{width:100%}#text-controls{display:inline-block;vertical-align:top;border:1px dotted #ccc;padding:10px}#text-cmd-italic{font-style:italic}#text-cmd-underline{text-decoration:underline}#text-cmd-linethrough{text-decoration:line-through}#text-cmd-overline{text-decoration:overline}.popover-shape div{margin-bottom:10px}.right-controller{position:absolute;top:40px;right:5px;width:320px;height:384px;background-color:#efefef;overflow-y:auto;padding:8px;border:1px solid #ccc}.right-controller-but,.right-controller-but:active,.right-controller-but:focus,.right-controller-but:hover{float:right;border:1px solid #ccc;background-color:#efefef;color:#20a0ff;border-radius:0}",""])},131:function(t,e,i){e=t.exports=i(1)(),e.push([t.i,"canvas{border:1px solid #ccc}.el-popover div.img-mark{background-color:#fff;border:1px dashed #ccc}",""])},148:function(t,e,i){/*!
 * Vue-Lazyload.js v1.0.6
 * (c) 2017 Awe <hilongjw@gmail.com>
 * Released under the MIT License.
 */
!function(e,i){t.exports=i()}(0,function(){"use strict";function t(t,e){if(t.length){var i=t.indexOf(e);return i>-1?t.splice(i,1):void 0}}function e(t,e){if(!t||!e)return t||{};if(t instanceof Object)for(var i in e)t[i]=e[i];return t}function i(t,e){for(var i=!1,n=0,o=t.length;n<o;n++)if(e(t[n])){i=!0;break}return i}function n(t,e){if("IMG"===t.tagName&&t.getAttribute("data-srcset")){var i=t.getAttribute("data-srcset"),n=[],o=t.parentNode,a=o.offsetWidth*e,r=void 0,s=void 0,l=void 0;i=i.trim().split(","),i.map(function(t){t=t.trim(),r=t.lastIndexOf(" "),-1===r?(s=t,l=999998):(s=t.substr(0,r),l=parseInt(t.substr(r+1,t.length-r-2),10)),n.push([l,s])}),n.sort(function(t,e){if(t[0]<e[0])return-1;if(t[0]>e[0])return 1;if(t[0]===e[0]){if(-1!==e[1].indexOf(".webp",e[1].length-5))return 1;if(-1!==t[1].indexOf(".webp",t[1].length-5))return-1}return 0});for(var c="",d=void 0,u=n.length,h=0;h<u;h++)if(d=n[h],d[0]>=a){c=d[1];break}return c}}function o(t,e){for(var i=void 0,n=0,o=t.length;n<o;n++)if(e(t[n])){i=t[n];break}return i}function a(){if(!h)return!1;var t=!0,e=document;try{var i=e.createElement("object");i.type="image/webp",i.style.visibility="hidden",i.innerHTML="!",e.body.appendChild(i),t=!i.offsetWidth,e.body.removeChild(i)}catch(e){t=!1}return t}function r(t,e){var i=null,n=0;return function(){if(!i){var o=Date.now()-n,a=this,r=arguments,s=function(){n=Date.now(),i=!1,t.apply(a,r)};o>=e?s():i=setTimeout(s,e)}}}function s(t){return null!==t&&"object"===(void 0===t?"undefined":c(t))}function l(t){if(!(t instanceof Object))return[];if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h="undefined"!=typeof window,f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h&&window.devicePixelRatio||t},p=function(){if(h){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}}(),g={on:function(t,e,i){p?t.addEventListener(e,i,{passive:!0}):t.addEventListener(e,i,!1)},off:function(t,e,i){t.removeEventListener(e,i)}},v=function(t,e,i){var n=new Image;n.src=t.src,n.onload=function(){e({naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,src:n.src})},n.onerror=function(t){i(t)}},m=function(t,e){return"undefined"!=typeof getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.style[e]},b=function(t){return m(t,"overflow")+m(t,"overflow-y")+m(t,"overflow-x")},y=function(t){if(h){if(!(t instanceof HTMLElement))return window;for(var e=t;e&&e!==document.body&&e!==document.documentElement&&e.parentNode;){if(/(scroll|auto)/.test(b(e)))return e;e=e.parentNode}return window}},_={},x=function(){function t(e){var i=e.el,n=e.src,o=e.error,a=e.loading,r=e.bindType,s=e.$parent,l=e.options,c=e.elRenderer;d(this,t),this.el=i,this.src=n,this.error=o,this.loading=a,this.bindType=r,this.attempt=0,this.naturalHeight=0,this.naturalWidth=0,this.options=l,this.filter(),this.initState(),this.performanceData={init:Date.now(),loadStart:null,loadEnd:null},this.rect=i.getBoundingClientRect(),this.$parent=s,this.elRenderer=c,this.render("loading",!1)}return u(t,[{key:"initState",value:function(){this.state={error:!1,loaded:!1,rendered:!1}}},{key:"record",value:function(t){this.performanceData[t]=Date.now()}},{key:"update",value:function(t){var e=t.src,i=t.loading,n=t.error,o=this.src;this.src=e,this.loading=i,this.error=n,this.filter(),o!==this.src&&(this.attempt=0,this.initState())}},{key:"getRect",value:function(){this.rect=this.el.getBoundingClientRect()}},{key:"checkInView",value:function(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>this.options.preLoadTop&&this.rect.left<window.innerWidth*this.options.preLoad&&this.rect.right>0}},{key:"filter",value:function(){var t=this;l(this.options.filter).map(function(e){t.options.filter[e](t,t.options)})}},{key:"renderLoading",value:function(t){var e=this;v({src:this.loading},function(i){e.render("loading",!1),t()})}},{key:"load",value:function(){var t=this;return this.attempt>this.options.attempt-1&&this.state.error?void(this.options.silent||console.log("error end")):this.state.loaded||_[this.src]?this.render("loaded",!0):void this.renderLoading(function(){t.attempt++,t.record("loadStart"),v({src:t.src},function(e){t.naturalHeight=e.naturalHeight,t.naturalWidth=e.naturalWidth,t.state.loaded=!0,t.state.error=!1,t.record("loadEnd"),t.render("loaded",!1),_[t.src]=1},function(e){t.state.error=!0,t.state.loaded=!1,t.render("error",!1)})})}},{key:"render",value:function(t,e){this.elRenderer(this,t,e)}},{key:"performance",value:function(){var t="loading",e=0;return this.state.loaded&&(t="loaded",e=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(t="error"),{src:this.src,state:t,time:e}}},{key:"destroy",value:function(){this.el=null,this.src=null,this.error=null,this.loading=null,this.bindType=null,this.attempt=0}}]),t}(),k="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",w=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],C=function(l){return function(){function c(t){var e=this,i=t.preLoad,n=t.error,o=t.preLoadTop,s=t.dispatchEvent,l=t.loading,u=t.attempt,h=t.silent,p=t.scale,g=t.listenEvents,v=(t.hasbind,t.filter),m=t.adapter;d(this,c),this.version="1.0.6",this.ListenerQueue=[],this.TargetIndex=0,this.TargetQueue=[],this.options={silent:h||!0,dispatchEvent:!!s,preLoad:i||1.3,preLoadTop:o||0,error:n||k,loading:l||k,attempt:u||3,scale:p||f(p),ListenEvents:g||w,hasbind:!1,supportWebp:a(),filter:v||{},adapter:m||{}},this._initEvent(),this.lazyLoadHandler=r(function(){var t=!1;e.ListenerQueue.forEach(function(e){e.state.loaded||(t=e.checkInView())&&e.load()})},200)}return u(c,[{key:"config",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this.options,t)}},{key:"performance",value:function(){var t=[];return this.ListenerQueue.map(function(e){t.push(e.performance())}),t}},{key:"addLazyBox",value:function(t){this.ListenerQueue.push(t),h&&(this._addListenerTarget(window),t.$el&&t.$el.parentNode&&this._addListenerTarget(t.$el.parentNode))}},{key:"add",value:function(t,e,o){var a=this;if(i(this.ListenerQueue,function(e){return e.el===t}))return this.update(t,e),l.nextTick(this.lazyLoadHandler);var r=this._valueFormatter(e.value),s=r.src,c=r.loading,d=r.error;l.nextTick(function(){s=n(t,a.options.scale)||s;var i=Object.keys(e.modifiers)[0],r=void 0;i&&(r=o.context.$refs[i],r=r?r.$el||r:document.getElementById(i)),r||(r=y(t));var u=new x({bindType:e.arg,$parent:r,el:t,loading:c,error:d,src:s,elRenderer:a._elRenderer.bind(a),options:a.options});a.ListenerQueue.push(u),h&&(a._addListenerTarget(window),a._addListenerTarget(r)),a.lazyLoadHandler(),l.nextTick(function(){return a.lazyLoadHandler()})})}},{key:"update",value:function(t,e){var i=this,a=this._valueFormatter(e.value),r=a.src,s=a.loading,c=a.error;r=n(t,this.options.scale)||r;var d=o(this.ListenerQueue,function(e){return e.el===t});d&&d.update({src:r,loading:s,error:c}),this.lazyLoadHandler(),l.nextTick(function(){return i.lazyLoadHandler()})}},{key:"remove",value:function(e){if(e){var i=o(this.ListenerQueue,function(t){return t.el===e});i&&(this._removeListenerTarget(i.$parent),this._removeListenerTarget(window),t(this.ListenerQueue,i)&&i.destroy())}}},{key:"removeComponent",value:function(e){e&&(t(this.ListenerQueue,e),e.$parent&&e.$el.parentNode&&this._removeListenerTarget(e.$el.parentNode),this._removeListenerTarget(window))}},{key:"_addListenerTarget",value:function(t){if(t){var e=o(this.TargetQueue,function(e){return e.el===t});return e?e.childrenCount++:(e={el:t,id:++this.TargetIndex,childrenCount:1,listened:!0},this._initListen(e.el,!0),this.TargetQueue.push(e)),this.TargetIndex}}},{key:"_removeListenerTarget",value:function(t){var e=this;this.TargetQueue.forEach(function(i,n){i.el===t&&(--i.childrenCount||(e._initListen(i.el,!1),e.TargetQueue.splice(n,1),i=null))})}},{key:"_initListen",value:function(t,e){var i=this;this.options.ListenEvents.forEach(function(n){return g[e?"on":"off"](t,n,i.lazyLoadHandler)})}},{key:"_initEvent",value:function(){var e=this;this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=function(t,i){e.Event.listeners[t].push(i)},this.$once=function(t,i){function n(){o.$off(t,n),i.apply(o,arguments)}var o=e;e.$on(t,n)},this.$off=function(i,n){return n?void t(e.Event.listeners[i],n):void(e.Event.listeners[i]=[])},this.$emit=function(t,i,n){e.Event.listeners[t].forEach(function(t){return t(i,n)})}}},{key:"_elRenderer",value:function(t,e,i){if(t.el){var n=t.el,o=t.bindType,a=void 0;switch(e){case"loading":a=t.loading;break;case"error":a=t.error;break;default:a=t.src}if(o?n.style[o]="url("+a+")":n.getAttribute("src")!==a&&n.setAttribute("src",a),n.setAttribute("lazy",e),this.$emit(e,t,i),this.options.adapter[e]&&this.options.adapter[e](t,this.options),this.options.dispatchEvent){var r=new CustomEvent(e,{detail:t});n.dispatchEvent(r)}}}},{key:"_valueFormatter",value:function(t){var e=t,i=this.options.loading,n=this.options.error;return s(t)&&(t.src||this.options.silent||console.error("Vue Lazyload warning: miss src with "+t),e=t.src,i=t.loading||this.options.loading,n=t.error||this.options.error),{src:e,loading:i,error:n}}}]),c}()},S=function(t){return{props:{tag:{type:String,default:"div"}},render:function(t){return!1===this.show?t(this.tag):t(this.tag,null,this.$slots.default)},data:function(){return{state:{loaded:!1},rect:{},show:!1}},mounted:function(){t.addLazyBox(this),t.lazyLoadHandler()},beforeDestroy:function(){t.removeComponent(this)},methods:{getRect:function(){this.rect=this.$el.getBoundingClientRect()},checkInView:function(){return this.getRect(),h&&this.rect.top<window.innerHeight*t.options.preLoad&&this.rect.bottom>0&&this.rect.left<window.innerWidth*t.options.preLoad&&this.rect.right>0},load:function(){this.show=!0,this.state.loaded=!0,this.$emit("show",this)}}}};return{install:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=C(t),o=new n(i),a="2"===t.version.split(".")[0];t.prototype.$Lazyload=o,i.lazyComponent&&t.component("lazy-component",S(o)),a?t.directive("lazy",{bind:o.add.bind(o),update:o.update.bind(o),componentUpdated:o.lazyLoadHandler.bind(o),unbind:o.remove.bind(o)}):t.directive("lazy",{bind:o.lazyLoadHandler.bind(o),update:function(t,i){e(this.vm.$refs,this.vm.$els),o.add(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:i},{context:this.vm})},unbind:function(){o.remove(this.el)}})}}})},152:function(t,e,i){i(192);var n=i(2)(i(98),i(169),null,null);t.exports=n.exports},153:function(t,e,i){i(185);var n=i(2)(i(99),i(162),null,null);t.exports=n.exports},154:function(t,e,i){i(183);var n=i(2)(i(100),i(160),null,null);t.exports=n.exports},155:function(t,e,i){i(190);var n=i(2)(i(101),i(167),null,null);t.exports=n.exports},156:function(t,e,i){i(187);var n=i(2)(i(102),i(164),null,null);t.exports=n.exports},160:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["textbox"==t.layer.type?i("span",{style:{color:t.layer.fill}},[t._v(t._s(t.layer.text))]):t._e(),t._v(" "),"image"==t.layer.type?i("div",{staticClass:"image",style:{"background-image":"url("+t.layer.getSrc()+")"}},[t._v("\n         \n    ")]):t._e(),t._v(" "),"line"==t.layer.type?i("div",{style:{color:"#fff","background-color":t.layer.stroke}},[t._v(t._s(t.layer.type))]):t._e(),t._v(" "),"triangle"==t.layer.type?i("div",{style:{color:"#fff","background-color":t.layer.fill}},[t._v(t._s(t.layer.type))]):t._e()])},staticRenderFns:[]}},162:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"layer-menu",on:{click:function(e){t.toggleLayer("show")}}},[i("i",{staticClass:"el-icon-menu",attrs:{title:"layer"}})]),t._v(" "),i("div",{class:t.layer_css,on:{mouseover:function(e){t.toggleLayer("hide")},mouseout:function(e){t.toggleLayer("hide")}}},[i("div",{staticClass:"layer-header",on:{click:t.toggleLayer}},[i("i",{class:t.layer_icon_css,attrs:{title:"layer"}}),t._v("\n            Layers\n        ")]),t._v(" "),i("div",{staticClass:"layer-content"},[i("draggable",{on:{update:t.datadragEnd},model:{value:t.layers,callback:function(e){t.layers=e},expression:"layers"}},[i("transition-group",t._l(t.layers,function(t,e){return i("div",{key:e,staticClass:"layer-item"},[i("feedsMarkFormLayersItem",{attrs:{layer:t}})],1)}))],1)],1),t._v(" "),i("div",{staticClass:"layer-footer"},[t._v("\n            footer\n        ")])])])},staticRenderFns:[]}},164:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"viewImageDialog",style:"height:"+t.height+"px;overflow-y:auto;overflow-x:hidden;"},[t.viewImages.length>0?i("el-row",{attrs:{gutter:24,justify:"center"}},t._l(t.viewImages,function(t){return i("el-col",{key:"key",attrs:{span:6}},[i("div",{staticClass:"grid-content bg-purple"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"src"}]})])])})):i("div",[i("h2",[t._v("loading...")])])],1)},staticRenderFns:[]}},167:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{directives:[{name:"show",rawName:"v-show",value:t.objectSelected,expression:"objectSelected"}],ref:"object",attrs:{"label-position":"top",model:t.object}},["image"!=t.object.type?i("el-form-item",{attrs:{label:"Fill / Stroke / Background"}},[i("div",[i("el-color-picker",{on:{change:t.setValFill},model:{value:t.object.fill,callback:function(e){t.object.fill=e},expression:"object.fill"}}),t._v(" "),i("el-color-picker",{on:{change:t.setValStroke},model:{value:t.object.stroke,callback:function(e){t.object.stroke=e},expression:"object.stroke"}}),t._v(" "),i("el-color-picker",{on:{change:t.setValTextBackgroundColor},model:{value:t.object.textBackgroundColor,callback:function(e){t.object.textBackgroundColor=e},expression:"object.textBackgroundColor"}})],1)]):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"Opacity"}},[i("el-slider",{attrs:{min:0,max:1,step:.05,"format-tooltip":t.formatOpacityTooltip},on:{change:t.setValOpacity},model:{value:t.object.opacity,callback:function(e){t.object.opacity=e},expression:"object.opacity"}})],1),t._v(" "),"image"!=t.object.type?i("el-form-item",{attrs:{label:"Stroke width"}},[i("el-slider",{attrs:{min:0,max:20,step:1},on:{change:t.setValStrokeWidth},model:{value:t.object.strokeWidth,callback:function(e){t.object.strokeWidth=e},expression:"object.strokeWidth"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"Angle"}},[i("el-slider",{attrs:{min:0,max:360,step:5},on:{change:t.setValAngle},model:{value:t.object.angle,callback:function(e){t.object.angle=e},expression:"object.angle"}})],1),t._v(" "),"textbox"==t.object.type?i("div",{attrs:{id:"text-wrapper"}},[i("div",{attrs:{id:"text-controls"}},[i("p",[t._v("Text specific controls")]),t._v(" "),i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},on:{change:t.setValText,blur:t.setValText},model:{value:t.object.text,callback:function(e){t.object.text=e},expression:"object.text"}}),t._v(" "),i("el-form-item",{attrs:{label:"Font family"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.setValFontFamily},model:{value:t.object.fontFamily,callback:function(e){t.object.fontFamily=e},expression:"object.fontFamily"}},[i("el-option",{attrs:{value:"arial"}},[t._v("Arial")]),t._v(" "),i("el-option",{attrs:{value:"helvetica"}},[t._v("Helvetica")]),t._v(" "),i("el-option",{attrs:{value:"myriad pro"}},[t._v("Myriad Pro")]),t._v(" "),i("el-option",{attrs:{value:"delicious"}},[t._v("Delicious")]),t._v(" "),i("el-option",{attrs:{value:"verdana"}},[t._v("Verdana")]),t._v(" "),i("el-option",{attrs:{value:"georgia"}},[t._v("Georgia")]),t._v(" "),i("el-option",{attrs:{value:"courier"}},[t._v("Courier")]),t._v(" "),i("el-option",{attrs:{value:"comic sans ms"}},[t._v("Comic Sans MS")]),t._v(" "),i("el-option",{attrs:{value:"impact"}},[t._v("Impact")]),t._v(" "),i("el-option",{attrs:{value:"monaco"}},[t._v("Monaco")]),t._v(" "),i("el-option",{attrs:{value:"optima"}},[t._v("Optima")]),t._v(" "),i("el-option",{attrs:{value:"hoefler text"}},[t._v("Hoefler Text")]),t._v(" "),i("el-option",{attrs:{value:"plaster"}},[t._v("Plaster")]),t._v(" "),i("el-option",{attrs:{value:"engagement"}},[t._v("Engagement")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"Text align"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.setValTextAlign},model:{value:t.object.textAlign,callback:function(e){t.object.textAlign=e},expression:"object.textAlign"}},[i("el-option",{attrs:{value:"left"}},[t._v("Left")]),t._v(" "),i("el-option",{attrs:{value:"center"}},[t._v("Center")]),t._v(" "),i("el-option",{attrs:{value:"right"}},[t._v("Right")]),t._v(" "),i("el-option",{attrs:{value:"justify"}},[t._v("Justify")])],1)],1),t._v(" "),i("div",[i("label",{attrs:{for:"text-lines-bg-color"}},[t._v("Background text color:")]),t._v(" "),i("el-color-picker",{on:{change:t.setValBackgroundColor},model:{value:t.object.backgroundColor,callback:function(e){t.object.backgroundColor=e},expression:"object.backgroundColor"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"Font size"}},[i("el-slider",{attrs:{min:8,max:70,step:1},on:{change:t.setValFontSize},model:{value:t.object.fontSize,callback:function(e){t.object.fontSize=e},expression:"object.fontSize"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"Line height"}},[i("el-slider",{attrs:{min:0,max:10,step:.1},on:{change:t.setValLineHeight},model:{value:t.object.lineHeight,callback:function(e){t.object.lineHeight=e},expression:"object.lineHeight"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"Char spacing"}},[i("el-slider",{attrs:{min:-10,max:200,step:5},on:{change:t.setValCharSpacing},model:{value:t.object.charSpacing,callback:function(e){t.object.charSpacing=e},expression:"object.charSpacing"}})],1),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.toggleTextStyle("fontWeight:bold")}}},[t._v("\n                    Bold\n                ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-italic"},on:{click:function(e){t.toggleTextStyle("fontStyle:italic")}}},[t._v("\n                    Italic\n                ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-underline"},on:{click:function(e){t.toggleTextStyle("textDecoration:underline")}}},[t._v("\n                    Underline\n                ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-linethrough"},on:{click:function(e){t.toggleTextStyle("textDecoration:line-through")}}},[t._v("\n                    Linethrough\n                ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-overline"},on:{click:function(e){t.toggleTextStyle("textDecoration:overline")}}},[t._v("\n                    Overline\n                ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.shadowify}},[t._v("阴 影")])],1)]):t._e(),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(e){t.removeObject()}}},[t._v("\n            Remove selected object\n        ")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(e){t.removeObject("ALL")}}},[t._v("\n            Remove All objects\n        ")])],1),t._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.objectSelected&&t.image.url,expression:"!objectSelected && image.url"}],ref:"object",attrs:{"label-position":"top",model:t.background}},[i("el-form-item",{attrs:{label:"素材图缩放"}},[i("el-slider",{attrs:{min:50,max:150,step:5},on:{change:t.setBackground},model:{value:t.background.size,callback:function(e){t.background.size=e},expression:"background.size"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"素材图水平位移"}},[i("el-slider",{attrs:{min:-50,max:t.image.width-0,step:5},on:{change:t.setBackground},model:{value:t.background.position.x,callback:function(e){t.background.position.x=e},expression:"background.position.x"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"素材图垂直位移"}},[i("el-slider",{attrs:{min:-50,max:t.image.height-0,step:5},on:{change:t.setBackground},model:{value:t.background.position.y,callback:function(e){t.background.position.y=e},expression:"background.position.y"}})],1)],1)],1)},staticRenderFns:[]}},169:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"form",attrs:{"label-position":"left",model:t.form,"label-width":"120px",rules:t.rules}},[i("el-form-item",{attrs:{label:"Mark Name",prop:"name"}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{staticClass:"canvas-view-feeds",attrs:{label:"画布尺寸",prop:"canvas_size"}},[i("el-select",{attrs:{placeholder:"画布尺寸"},on:{change:t.canvasSizeChange},model:{value:t.canvas_size,callback:function(e){t.canvas_size=e},expression:"canvas_size"}},[i("el-option",{key:"800x800",attrs:{value:"800x800",label:"800x800"}}),t._v(" "),i("el-option",{key:"1200x628",attrs:{value:"1200x628",label:"1200x628"}})],1)],1),t._v(" "),i("el-form-item",{staticClass:"canvas-view-feeds",attrs:{label:"Feeds",prop:"fid"}},[i("el-select",{attrs:{placeholder:"请选择Feed"},on:{change:t.feedChange},model:{value:t.form.fid,callback:function(e){t.form.fid=e},expression:"form.fid"}},t._l(t.feeds,function(t){return i("el-option",{key:t.id,attrs:{label:t.url,value:t.id}})}))],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.image.width,expression:"image.width"}],staticClass:"canvas-view"},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"background-color":"#cffffc",padding:"5px"}},[i("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:t.addTextbox}},[t._v("Add Text")]),t._v(" "),i("el-popover",{ref:"popover_image",attrs:{placement:"bottom",width:"220",trigger:"click"}},[i("el-row",{staticClass:"popover-shape",attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"picture"}},[t._v("\n                                前景图\n                            ")]),t._v(" "),i("input",{staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"100px",height:"25px",overflow:"hidden",position:"relative",top:"-30px"},attrs:{type:"file",id:"file"},on:{change:t.getFilePath}})],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"picture"}},[t._v("\n                                背景图\n                            ")]),t._v(" "),i("input",{staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"100px",height:"25px",overflow:"hidden",position:"relative",top:"-30px"},attrs:{type:"file",id:"file_bg"},on:{change:t.getFilePath}})],1)],1)],1),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover_image",arg:"popover_image"}],attrs:{type:"primary",icon:"star-on"}},[t._v("\n                    Add Image\n                ")]),t._v(" "),i("el-popover",{ref:"popover_shape",attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("el-row",{staticClass:"popover-shape",attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:t.addShapeLine}},[t._v("直 线")])],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:t.addShapeRect}},[t._v("四边形")])],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:t.addShapeCircle}},[t._v("圆 形")])],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:t.addShapeTriangle}},[t._v("三角形")])],1)],1)],1),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover_shape",arg:"popover_shape"}],attrs:{type:"primary",icon:"star-on"}},[t._v("\n                    Add Shape\n                ")]),t._v(" "),i("el-button",{staticClass:"right-controller-but",attrs:{type:"primary",icon:"setting"},on:{click:t.toggleRightController}},[t._v("\n                    "+t._s(t.rightController?"隐藏":"显示")+"\n                ")])],1),t._v(" "),i("el-row",{attrs:{gutter:22}},[i("el-col",{attrs:{span:22}},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"min-height":"400px"}},[i("div",{style:t.backgroundImageStyle(),attrs:{height:t.image.height,width:t.image.width}},[i("canvas",{style:t.imageStyle,attrs:{height:t.image.height,width:t.image.width,id:"tu"}})]),t._v(" "),i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.imageStyle,expression:"imageStyle"}],attrs:{type:"text",icon:"caret-right"},on:{click:t.flushImage}},[t._v("\n                                换个素材看看效果")])],1)])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.rightController,expression:"rightController"}],staticClass:"right-controller"},[i("feedsMarkFormScope",{ref:"feedsMarkFormScope",attrs:{canvas:t.canvas,image:t.image},on:{setBackground:t.setBackground}})],1),t._v(" "),i("feedsMarkFormLayers",{ref:"feedsMarkFormLayers",attrs:{canvas:t.canvas}})],1)],1)],1)},staticRenderFns:[]}},174:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mytable"},[i("v-headerTop"),t._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:4}},[i("div",{staticClass:"grid-left bg-purple-darkc overflow-y",attrs:{id:"app_left_menu"}},[i("v-leftMenu")],1)]),t._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{padding:"10px"}},[i("el-button",{staticStyle:{float:"right","z-index":"1",position:"relative"},attrs:{type:"primary"},on:{click:function(e){t.openDialog(-1)}}},[i("i",{staticClass:"el-icon-plus"}),t._v("Add Feed Mark")]),t._v(" "),i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"Feed Mark Lists",name:"getRulesData"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rulesData,border:"","max-height":"100%"}},[i("el-table-column",{attrs:{width:"110",label:"Thumb"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[i("div",{staticClass:"img-mark"},[i("img",{staticStyle:{"max-width":"500px"},attrs:{src:e.row.mark_img_path}})]),t._v(" "),i("div",{slot:"reference"},[i("img",{attrs:{height:"100",src:e.row.mark_img_path}})])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Mark Name",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Img Size",width:"120",formatter:t.formatCanvasSize}}),t._v(" "),i("el-table-column",{attrs:{prop:"mark_url",label:"Mark URL"}}),t._v(" "),i("el-table-column",{attrs:{label:"Feed URL"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                ["+t._s(e.row.brand)+"] "+t._s(e.row.url)+"\n                            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"count_items",label:"商品数",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),t.openDialog(e.$index,t.rulesData)}}},[t._v("\n                                    修改\n                                ")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),t.openDialog(e.$index,t.rulesData,!0)}}},[t._v("\n                                    复制\n                                ")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),t.viewImageDialog(e.$index,t.rulesData)}}},[t._v("\n                                    预览\n                                ")])]}}])})],1)],1)],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"Update Feed Mark",visible:t.dialogTableVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,size:"large"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("feedsMarkForm",{ref:"feedsMarkForm",attrs:{form:t.form,feeds:t.feeds}}),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updateDialog}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"View Feed Mark",visible:t.viewImageDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,size:"full"},on:{"update:visible":function(e){t.viewImageDialogVisible=e}}},[i("viewImageDialog",{ref:"viewImageDialog",attrs:{viewImages:t.viewImages}}),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:t.closeViewImageDialog}},[t._v("关 闭")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.viewImageDialog}},[t._v("换一批")])],1)],1)],1)},staticRenderFns:[]}},183:function(t,e,i){var n=i(117);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("f2098072",n,!0)},185:function(t,e,i){var n=i(119);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("7be9db10",n,!0)},187:function(t,e,i){var n=i(121);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("d2e08a4c",n,!0)},190:function(t,e,i){var n=i(124);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("2bcf7f64",n,!0)},192:function(t,e,i){var n=i(126);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("0f18351e",n,!0)},197:function(t,e,i){var n=i(131);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(4)("904de3d2",n,!0)},67:function(t,e,i){i(197);var n=i(2)(i(97),i(174),null,null);t.exports=n.exports},86:function(t,e,i){var n,o;/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(a){"use strict";n=a,void 0!==(o="function"==typeof n?n.call(e,i,e,t):n)&&(t.exports=o)}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=y({},e),t[U]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i)!(n in e)&&(e[n]=i[n]);rt(e);for(var o in this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&q,a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),a(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(a(t,"dragover",this),a(t,"dragenter",this)),ot.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t,e){"clone"!==t.lastPullMode&&(e=!0),S&&S.state!==e&&(l(S,"display",e?"none":""),e||S.state&&(t.options.group.revertClone?(A.insertBefore(S,D),t._animate(k,S)):A.insertBefore(S,k)),S.state=e)}function i(t,e,i){if(t){i=i||Q;do{if(">*"===e&&t.parentNode===i||m(t,e))return t}while(t=n(t))}return null}function n(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function o(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function a(t,e,i){t.addEventListener(e,i,G)}function r(t,e,i){t.removeEventListener(e,i,G)}function s(t,e,i){if(t)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(H," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(H," ")}}function l(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return Q.defaultView&&Q.defaultView.getComputedStyle?i=Q.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function c(t,e,i){if(t){var n=t.getElementsByTagName(e),o=0,a=n.length;if(i)for(;o<a;o++)i(n[o],o);return n}return[]}function d(t,e,i,n,o,a,r){t=t||e[U];var s=Q.createEvent("Event"),l=t.options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);s.initEvent(i,!0,!0),s.to=e,s.from=o||e,s.item=n||e,s.clone=S,s.oldIndex=a,s.newIndex=r,e.dispatchEvent(s),l[c]&&l[c].call(t,s)}function u(t,e,i,n,o,a,r,s){var l,c,d=t[U],u=d.options.onMove;return l=Q.createEvent("Event"),l.initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=o||e,l.relatedRect=a||e.getBoundingClientRect(),l.willInsertAfter=s,t.dispatchEvent(l),u&&(c=u.call(d,l,r)),c}function h(t){t.draggable=!1}function f(){tt=!1}function p(t,e){var i=t.lastElementChild,n=i.getBoundingClientRect();return e.clientY-(n.top+n.height)>5||e.clientX-(n.left+n.width)>5}function g(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function v(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!m(t,e)||i++;return i}function m(t,e){if(t){e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==i&&t.nodeName.toUpperCase()!=i||e.length&&((" "+t.className+" ").match(n)||[]).length!=e.length)}return!1}function b(t,e){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?t.call(n,i[0]):t.apply(n,i),i=void 0},e))}}function y(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function _(t){return J?J(t).clone(!0)[0]:Z&&Z.dom?Z.dom(t).cloneNode(!0):t.cloneNode(!0)}function x(t){for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&nt.push(n)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var k,w,C,S,A,D,T,I,j,L,E,F,M,O,z,V,R,B,N,$,P={},H=/\s+/g,W=/left|right|inline/,U="Sortable"+(new Date).getTime(),Y=window,Q=Y.document,X=Y.parseInt,J=Y.jQuery||Y.Zepto,Z=Y.Polymer,G=!1,q=!!("draggable"in Q.createElement("div")),K=function(t){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(t=Q.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents)}(),tt=!1,et=Math.abs,it=Math.min,nt=[],ot=[],at=b(function(t,e,i){if(i&&e.scroll){var n,o,a,r,s,l,c=i[U],d=e.scrollSensitivity,u=e.scrollSpeed,h=t.clientX,f=t.clientY,p=window.innerWidth,g=window.innerHeight;if(j!==i&&(I=e.scroll,j=i,L=e.scrollFn,!0===I)){I=i;do{if(I.offsetWidth<I.scrollWidth||I.offsetHeight<I.scrollHeight)break}while(I=I.parentNode)}I&&(n=I,o=I.getBoundingClientRect(),a=(et(o.right-h)<=d)-(et(o.left-h)<=d),r=(et(o.bottom-f)<=d)-(et(o.top-f)<=d)),a||r||(a=(p-h<=d)-(h<=d),r=(g-f<=d)-(f<=d),(a||r)&&(n=Y)),P.vx===a&&P.vy===r&&P.el===n||(P.el=n,P.vx=a,P.vy=r,clearInterval(P.pid),n&&(P.pid=setInterval(function(){if(l=r?r*u:0,s=a?a*u:0,"function"==typeof L)return L.call(c,s,l,t);n===Y?Y.scrollTo(Y.pageXOffset+s,Y.pageYOffset+l):(n.scrollTop+=l,n.scrollLeft+=s)},24)))}},30),rt=function(t){function e(t,e){return void 0!==t&&!0!==t||(t=i.name),"function"==typeof t?t:function(i,n){var o=n.options.group.name;return e?t:t&&(t.join?t.indexOf(o)>-1:o==t)}}var i={},n=t.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i};t.prototype={constructor:t,_onTapStart:function(t){var e,n=this,o=this.el,a=this.options,r=a.preventOnFilter,s=t.type,l=t.touches&&t.touches[0],c=(l||t).target,u=t.target.shadowRoot&&t.path&&t.path[0]||c,h=a.filter;if(x(o),!k&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||a.disabled)&&(c=i(c,a.draggable,o))&&T!==c){if(e=v(c,a.draggable),"function"==typeof h){if(h.call(this,t,c,this))return d(n,u,"filter",c,o,e),void(r&&t.preventDefault())}else if(h&&(h=h.split(",").some(function(t){if(t=i(u,t.trim(),o))return d(n,t,"filter",c,o,e),!0})))return void(r&&t.preventDefault());a.handle&&!i(u,a.handle,o)||this._prepareDragStart(t,l,c,e)}},_prepareDragStart:function(t,e,i,n){var o,r=this,l=r.el,u=r.options,f=l.ownerDocument;i&&!k&&i.parentNode===l&&(B=t,A=l,k=i,w=k.parentNode,D=k.nextSibling,T=i,V=u.group,O=n,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,k.style["will-change"]="transform",o=function(){r._disableDelayedDrag(),k.draggable=r.nativeDraggable,s(k,u.chosenClass,!0),r._triggerDragStart(t,e),d(r,A,"choose",k,A,O)},u.ignore.split(",").forEach(function(t){c(k,t.trim(),h)}),a(f,"mouseup",r._onDrop),a(f,"touchend",r._onDrop),a(f,"touchcancel",r._onDrop),a(f,"pointercancel",r._onDrop),a(f,"selectstart",r),u.delay?(a(f,"mouseup",r._disableDelayedDrag),a(f,"touchend",r._disableDelayedDrag),a(f,"touchcancel",r._disableDelayedDrag),a(f,"mousemove",r._disableDelayedDrag),a(f,"touchmove",r._disableDelayedDrag),a(f,"pointermove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(o,u.delay)):o())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag),r(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,e){e=e||("touch"==t.pointerType?t:null),e?(B={target:k,clientX:e.clientX,clientY:e.clientY},this._onDragStart(B,"touch")):this.nativeDraggable?(a(k,"dragend",this),a(A,"dragstart",this._onDragStart)):this._onDragStart(B,!0);try{Q.selection?setTimeout(function(){Q.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){if(A&&k){var e=this.options;s(k,e.ghostClass,!0),s(k,e.dragClass,!1),t.active=this,d(this,A,"start",k,A,O)}else this._nulling()},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,K||l(C,"display","none");var t=Q.elementFromPoint(N.clientX,N.clientY),e=t,i=ot.length;if(e)do{if(e[U]){for(;i--;)ot[i]({clientX:N.clientX,clientY:N.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);K||l(C,"display","")}},_onTouchMove:function(e){if(B){var i=this.options,n=i.fallbackTolerance,o=i.fallbackOffset,a=e.touches?e.touches[0]:e,r=a.clientX-B.clientX+o.x,s=a.clientY-B.clientY+o.y,c=e.touches?"translate3d("+r+"px,"+s+"px,0)":"translate("+r+"px,"+s+"px)";if(!t.active){if(n&&it(et(a.clientX-this._lastX),et(a.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),$=!0,N=a,l(C,"webkitTransform",c),l(C,"mozTransform",c),l(C,"msTransform",c),l(C,"transform",c),e.preventDefault()}},_appendGhost:function(){if(!C){var t,e=k.getBoundingClientRect(),i=l(k),n=this.options;C=k.cloneNode(!0),s(C,n.ghostClass,!1),s(C,n.fallbackClass,!0),s(C,n.dragClass,!0),l(C,"top",e.top-X(i.marginTop,10)),l(C,"left",e.left-X(i.marginLeft,10)),l(C,"width",e.width),l(C,"height",e.height),l(C,"opacity","0.8"),l(C,"position","fixed"),l(C,"zIndex","100000"),l(C,"pointerEvents","none"),n.fallbackOnBody&&Q.body.appendChild(C)||A.appendChild(C),t=C.getBoundingClientRect(),l(C,"width",2*e.width-t.width),l(C,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var i=t.dataTransfer,n=this.options;this._offUpEvents(),V.checkPull(this,this,k,t)&&(S=_(k),S.draggable=!1,S.style["will-change"]="",l(S,"display","none"),s(S,this.options.chosenClass,!1),A.insertBefore(S,k),d(this,A,"clone",k)),s(k,n.dragClass,!0),e?("touch"===e?(a(Q,"touchmove",this._onTouchMove),a(Q,"touchend",this._onDrop),a(Q,"touchcancel",this._onDrop),a(Q,"pointermove",this._onTouchMove),a(Q,"pointerup",this._onDrop)):(a(Q,"mousemove",this._onTouchMove),a(Q,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,k)),a(Q,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(n){var o,a,r,s,c=this.el,d=this.options,h=d.group,g=t.active,v=V===h,m=!1,b=d.sort;if(void 0!==n.preventDefault&&(n.preventDefault(),!d.dragoverBubble&&n.stopPropagation()),!k.animated&&($=!0,g&&!d.disabled&&(v?b||(s=!A.contains(k)):R===this||(g.lastPullMode=V.checkPull(this,g,k,n))&&h.checkPut(this,g,k,n))&&(void 0===n.rootEl||n.rootEl===this.el))){if(at(n,d,this.el),tt)return;if(o=i(n.target,d.draggable,c),a=k.getBoundingClientRect(),R!==this&&(R=this,m=!0),s)return e(g,!0),w=A,void(S||D?A.insertBefore(k,S||D):b||A.appendChild(k));if(0===c.children.length||c.children[0]===C||c===n.target&&p(c,n)){if(0!==c.children.length&&c.children[0]!==C&&c===n.target&&(o=c.lastElementChild),o){if(o.animated)return;r=o.getBoundingClientRect()}e(g,v),!1!==u(A,c,k,a,o,r,n)&&(k.contains(c)||(c.appendChild(k),w=c),this._animate(a,k),o&&this._animate(r,o))}else if(o&&!o.animated&&o!==k&&void 0!==o.parentNode[U]){E!==o&&(E=o,F=l(o),M=l(o.parentNode)),r=o.getBoundingClientRect();var y=r.right-r.left,_=r.bottom-r.top,x=W.test(F.cssFloat+F.display)||"flex"==M.display&&0===M["flex-direction"].indexOf("row"),T=o.offsetWidth>k.offsetWidth,I=o.offsetHeight>k.offsetHeight,j=(x?(n.clientX-r.left)/y:(n.clientY-r.top)/_)>.5,L=o.nextElementSibling,O=!1;if(x){var z=k.offsetTop,B=o.offsetTop;O=z===B?o.previousElementSibling===k&&!T||j&&T:o.previousElementSibling===k||k.previousElementSibling===o?(n.clientY-r.top)/_>.5:B>z}else m||(O=L!==k&&!I||j&&I);var N=u(A,c,k,a,o,r,n,O);!1!==N&&(1!==N&&-1!==N||(O=1===N),tt=!0,setTimeout(f,30),e(g,v),k.contains(c)||(O&&!L?c.appendChild(k):o.parentNode.insertBefore(k,O?L:o)),w=k.parentNode,this._animate(a,k),this._animate(r,o))}}},_animate:function(t,e){var i=this.options.animation;if(i){var n=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),l(e,"transition","none"),l(e,"transform","translate3d("+(t.left-n.left)+"px,"+(t.top-n.top)+"px,0)"),e.offsetWidth,l(e,"transition","all "+i+"ms"),l(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){l(e,"transition",""),l(e,"transform",""),e.animated=!1},i)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(Q,"touchmove",this._onTouchMove),r(Q,"pointermove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"pointerup",this._onDrop),r(t,"touchcancel",this._onDrop),r(t,"pointercancel",this._onDrop),r(t,"selectstart",this)},_onDrop:function(e){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(P.pid),clearTimeout(this._dragStartTimer),r(Q,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(Q,"drop",this),r(i,"dragstart",this._onDragStart)),this._offUpEvents(),e&&($&&(e.preventDefault(),!n.dropBubble&&e.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),A!==w&&"clone"===t.active.lastPullMode||S&&S.parentNode&&S.parentNode.removeChild(S),k&&(this.nativeDraggable&&r(k,"dragend",this),h(k),k.style["will-change"]="",s(k,this.options.ghostClass,!1),s(k,this.options.chosenClass,!1),d(this,A,"unchoose",k,A,O),A!==w?(z=v(k,n.draggable))>=0&&(d(null,w,"add",k,A,O,z),d(this,A,"remove",k,A,O,z),d(null,w,"sort",k,A,O,z),d(this,A,"sort",k,A,O,z)):k.nextSibling!==D&&(z=v(k,n.draggable))>=0&&(d(this,A,"update",k,A,O,z),d(this,A,"sort",k,A,O,z)),t.active&&(null!=z&&-1!==z||(z=O),d(this,A,"end",k,A,O,z),this.save()))),this._nulling()},_nulling:function(){A=k=w=C=D=S=T=I=j=B=N=$=z=E=F=R=V=t.active=null,nt.forEach(function(t){t.checked=!0}),nt.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":k&&(this._onDragOver(t),o(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,a=n.length,r=this.options;o<a;o++)t=n[o],i(t,r.draggable,this.el)&&e.push(t.getAttribute(r.dataIdAttr)||g(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,o){var a=n.children[o];i(a,this.options.draggable,n)&&(e[t]=a)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return i(t,e||this.options.draggable,this.el)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];i[t]=e,"group"===t&&rt(i)},destroy:function(){var t=this.el;t[U]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),r(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),ot.splice(ot.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},a(Q,"touchmove",function(e){t.active&&e.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){G={capture:!1,passive:!1}}}))}catch(t){}return t.utils={on:a,off:r,css:l,find:c,is:function(t,e){return!!i(t,e,t)},extend:y,throttle:b,closest:i,toggleClass:s,clone:_,index:v},t.create=function(e,i){return new t(e,i)},t.version="1.6.1",t})},88:function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};!function(){function e(t){function e(t){t.parentElement.removeChild(t)}function i(t,e,i){var n=0===i?t.children[0]:t.children[i-1].nextSibling;t.insertBefore(e,n)}function a(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function r(t,e,i){if(!t)return[];var o=t.map(function(t){return t.elm}),a=[].concat(n(e)).map(function(t){return o.indexOf(t)});return i?a.filter(function(t){return-1!==t}):a}function s(t,e){var i=this;this.$nextTick(function(){return i.$emit(t.toLowerCase(),e)})}function l(t){var e=this;return function(i){null!==e.realList&&e["onDrag"+t](i),s.call(e,t,i)}}var c=["Start","Add","Remove","Update","End"],d=["Choose","Sort","Filter","Clone"],u=["Move"].concat(c,d).map(function(t){return"on"+t}),h=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null}},data:function(){return{transitionMode:!1,componentMode:!1}},render:function(t){var e=this.$slots.default;if(e&&1===e.length){var i=e[0];i.componentOptions&&"transition-group"===i.componentOptions.tag&&(this.transitionMode=!0)}var o=e,a=this.$slots.footer;return a&&(o=e?[].concat(n(e),n(a)):[].concat(n(a))),t(this.element,null,o)},mounted:function(){var e=this;if(this.componentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.componentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var i={};c.forEach(function(t){i["on"+t]=l.call(e,t)}),d.forEach(function(t){i["on"+t]=s.bind(e,t)});var n=o({},this.options,i,{onMove:function(t,i){return e.onDragMove(t,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new t(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==u.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.componentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=r(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=a(this.getChildrenNodes()||[],t);return-1===e?null:{index:e,element:this.realList[e]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(n(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var i=function(i){return i.splice(e,0,i.splice(t,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(t){var e=t.to,i=t.related,n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};var a=n.realList,r={list:a,component:n};if(e!==i&&a&&n.getUnderlyingVm){var s=n.getUnderlyingVm(i);if(s)return o(s,r)}return r},getVmIndex:function(t){var e=this.visibleIndexes,i=e.length;return t>i-1?i:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),h=t.item},onDragAdd:function(t){var i=t.item._underlying_vm_;if(void 0!==i){e(t.item);var n=this.getVmIndex(t.newIndex);this.spliceList(n,0,i),this.computeIndexes();var o={element:i,newIndex:n};this.emitChanges({added:o})}},onDragRemove:function(t){if(i(this.rootContainer,t.item,t.oldIndex),this.isCloning)return void e(t.clone);var n=this.context.index;this.spliceList(n,1);var o={element:this.context.element,oldIndex:n};this.resetTransitionData(n),this.emitChanges({removed:o})},onDragUpdate:function(t){e(t.item),i(t.from,t.item,t.oldIndex);var n=this.context.index,o=this.getVmIndex(t.newIndex);this.updatePosition(n,o);var a={element:this.context.element,oldIndex:n,newIndex:o};this.emitChanges({moved:a})},computeFutureIndex:function(t,e){if(!t.element)return 0;var i=[].concat(n(e.to.children)).filter(function(t){return"none"!==t.style.display}),o=i.indexOf(e.related),a=t.component.getVmIndex(o);return-1==i.indexOf(h)&&e.willInsertAfter?a+1:a},onDragMove:function(t,e){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(t),a=this.context,r=this.computeFutureIndex(n,t);return o(a,{futureIndex:r}),o(t,{relatedContext:n,draggedContext:a}),i(t,e)},onDragEnd:function(t){this.computeIndexes(),h=null}}}}Array.from||(Array.from=function(t){return[].slice.call(t)});var a=i(86);t.exports=e(a)}()},97:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),a=(n(o),i(8)),r=n(a),s=i(5),l=n(s),c=i(152),d=n(c),u=i(156),h=n(u);e.default={components:{feedsMarkForm:d.default,viewImageDialog:h.default},data:function(){return{activeName:"getRulesData",rulesData:[],feeds:[],dialogTableVisible:!1,viewImageDialogVisible:!1,form:{},viewImages:[]}},mounted:function(){this.getData(),r.default.http(l.default.getFeeds,{},this.then)},methods:{then:function(t,e){switch(e){case l.default.getFeeds.code:this.feeds=t.data;break;case l.default.getFeedsMark.code:this.rulesData=t.data;break;case l.default.setFeedsMark.code:this.closeDialog(),r.default.setCache(l.default.getFeedsMark,""),this.getData()}},getData:function(){r.default.http(l.default.getFeedsMark,{},this.then)},editFeed:function(){},openDialog:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t>-1){var n={};Object.assign(n,e[t]),i&&(n.id="",n.name=n.name+"-[copy]"),this.form=n}else this.form={fid:"",background:{position:{x:0,y:0},size:100,canvas_size:""}};console.log("openDialog",this.form);var o=this;o.dialogTableVisible=!0,setTimeout(function(){o.$refs.feedsMarkForm.initPage()},100)},closeDialog:function(){this.dialogTableVisible=!1},updateDialog:function(){var t=this.$refs.feedsMarkForm.getFormData();console.log("form",t),t&&r.default.http(l.default.setFeedsMark,t,this.then)},upDateFormat:function(t){return t.uptime>0?r.default.date("MM-DD HH时",t.uptime):"-.-"},viewImageDialog:function(t,e){var i=[];e&&(this.viewImagesSrc=e[t].mark_img_path.replace(/-[^\-]{32}-/,"-"),this.viewImagesCount=e[t].count_items),this.viewImages=[];for(var n=parseInt(Math.random()*(this.viewImagesCount-100)),o=n;o<n+100;o++)i.push(this.viewImagesSrc+"/q/"+o+".jpeg");this.viewImageDialogVisible=!0;var a=this;setTimeout(function(){a.viewImages=i},1e3)},closeViewImageDialog:function(){this.viewImageDialogVisible=!1},formatCanvasSize:function(t,e){try{return t.background.canvas_size}catch(t){return""}}}}},98:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),a=(n(o),i(8)),r=n(a),s=i(5),l=n(s),c=i(155),d=n(c),u=i(153),h=n(u);!function(t,e,i){var n,o=t.getElementsByTagName(e)[0];t.getElementById(i)||(n=t.createElement(e),n.id=i,n.src="//cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.17/fabric.min.js",o.parentNode.insertBefore(n,o))}(document,"script","fabric-jssdk"),e.default={props:["form","feeds"],components:{feedsMarkFormScope:d.default,feedsMarkFormLayers:h.default},data:function(){return{initCanvasInterval:null,rules:{fid:[{required:!0,message:"请选择Feed",trigger:"blur"}],name:[{required:!0,message:"请填写Mark Name",trigger:"blur"}],canvas_size:[{required:!0,message:"请选择画布尺寸",trigger:"blur"}]},canvas:null,object:{text:""},image:{width:0,height:0,url:""},imageStyle:"",background:{},rightController:!0,background_base64:"",canvas_size:"",layers:[]}},mounted:function(){this.mountedInitCanvas(),this.form.fid&&r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)},methods:{mountedInitCanvas:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;"undefined"==typeof fabric?this.initCanvasInterval=setInterval(function(){e.initCanvas(t)},500):e.initCanvas(t)},then:function(t,e){switch(e){case l.default.getFeedsImageInfo.code:this.canvas_size=this.form.background.canvas_size||"",this.image.url=t.data.url,this.imageStyle="background-image: url("+t.data.url+");width:"+this.image.width+"px;height:"+this.image.height+"px;",this.mountedInitCanvas(!1),this.setBackground()}},backgroundImageStyle:function(){var t="border: 1px solid #00f;overflow: hidden;background-repeat: no-repeat;width:"+this.image.width+"px;height:"+this.image.height+"px;";if(this.form.bg_img_path)if(this.form.bg_img_path.indexOf("base64")>-1)t+="background-image: url("+this.form.bg_img_path+");";else{var e=r.default.cgi(this.form.bg_img_path);t+="background-image: url("+e+");"}return t},initPage:function(){console.log("feedsMarkForm.vue","initPage",this.form),this.form.fid?(this.canvas_size=this.form.background.canvas_size||"",r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)):(this.image={width:0,height:0,url:""},this.imageStyle="",this.mountedInitCanvas()),this.$refs.feedsMarkFormScope.initPage(this.form.background)},initCanvas:function(t){if(console.log("initCanvasInterval..."),"undefined"==typeof fabric)return void console.log("initCanvasInterval...");if(clearInterval(this.initCanvasInterval),this.initCanvasInterval=null,this.canvas||(this.canvas=new fabric.Canvas("tu"),this.watchCanvas()),this.canvas.setHeight(this.image.height),this.canvas.setWidth(this.image.width),t&&this.canvas.clear(),this.canvas.renderAll(),this.form.mark_object){var e=this;this.canvas.loadFromJSON(this.form.mark_object,function(){e.canvas.renderAll()})}},flushImage:function(){this.form.mark_object=JSON.stringify(this.canvas),r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)},getFormData:function(){var t=!1;return this.form.canvas_size=this.canvas_size,this.$refs.form.validate(function(e,i){e&&(t=!0)}),this.form.json=JSON.stringify(this.canvas),this.form.image_base64=this.toImage(),this.background.image=this.image,this.background.canvas_size=this.canvas_size,this.form.background=JSON.stringify(this.background),t?this.form:(r.default.toast("请完善信息"),!1)},feedChange:function(t){t&&r.default.http(l.default.getFeedsImageInfo,{fid:t},this.then)},canvasSizeChange:function(t){t=t.split("x"),2==t.length&&(this.image.width=t[0],this.image.height=t[1],this.imageStyle="background-image: url("+this.image.url+");width:"+this.image.width+"px;height:"+this.image.height+"px;",this.mountedInitCanvas(!1),this.setBackground())},pad:function(t,e){for(;t.length<e;)t="0"+t;return t},getRandomColor:function(){var t=fabric.util.getRandomInt;return this.pad(t(0,255).toString(16),2)+this.pad(t(0,255).toString(16),2)+this.pad(t(0,255).toString(16),2)},addTextbox:function(){var t=fabric.util.getRandomInt,e=new fabric.Textbox("请输入内容,\n请输入内容",{fontSize:20,left:t(0,this.image.width/2),top:t(0,this.image.height/2),fontFamily:"helvetica",angle:0,fill:"#"+this.getRandomColor(),fontWeight:"",originX:"left",width:parseInt(this.image.width/2),hasRotatingPoint:!0,centerTransform:!0});this.canvas.add(e)},watchCanvas:function(){this.canvas.on("mouse:up",this.$refs.feedsMarkFormScope.updateScope)},toImage:function(t){if(fabric.Canvas.supports("toDataURL")){return this.canvas.toDataURL({multiplier:t,format:"png"})}r.default.alert("This browser doesn't provide means to serialize canvas to an image")},getFilePath:function(t){console.log(arguments),t=t.target;var e="file_bg"==t.id,i=t.files[0];if(i){var n=this,o=new FileReader;o.onload=function(t){console.log("reader.onload",t.target),e?n.form.bg_img_path=t.target.result:fabric.Image.fromURL(t.target.result,function(t){if(console.log("fabric.Image.fromURL.onload",t),!(t.width<1||t.height<1)){var e=1;n.image.width<t.width&&(e=n.image.width/t.width),t.set({left:0,top:0,angle:0}).scale(e).setCoords(),n.canvas.add(t)}})},o.readAsDataURL(i)}},addShapeRect:function(){this.canvas.add(new fabric.Rect({left:parseInt(this.canvas.width/3),top:parseInt(this.canvas.height/3),fill:"#"+this.getRandomColor(),width:this.canvas.width/3,height:this.canvas.height/3,opacity:1}))},addShapeLine:function(){this.canvas.add(new fabric.Line([0,parseInt(this.canvas.height/2),this.canvas.width,parseInt(this.canvas.height/2)],{left:0,top:parseInt(this.canvas.height/2),stroke:"#"+this.getRandomColor(),strokeWidth:5}))},addShapeCircle:function(){this.canvas.add(new fabric.Circle({left:0,top:0,fill:"#"+this.getRandomColor(),radius:parseInt(this.canvas.height/3),opacity:1}))},addShapeTriangle:function(){this.canvas.add(new fabric.Triangle({left:parseInt(this.canvas.width/3),top:parseInt(this.canvas.height/3),fill:"#"+this.getRandomColor(),width:parseInt(this.canvas.width/3),height:parseInt(this.canvas.height/3),opacity:1}))},setBackground:function(){if(this.background=this.$refs.feedsMarkFormScope.background,this.imageStyle){var t=(this.background.size&&this.background.size,parseInt(800*this.background.size/100));this.imageStyle+="background-repeat:no-repeat;background-size:"+t+"px "+t+"px;background-position-x:"+this.background.position.x+"px;background-position-y:"+this.background.position.y+"px;"}},toggleRightController:function(){this.rightController=!this.rightController}}}},99:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),a=(n(o),i(88)),r=n(a),s=i(154),l=n(s);e.default={components:{draggable:r.default,feedsMarkFormLayersItem:l.default},props:["canvas"],data:function(){return{layer_css:"layer",layer_icon_css:"el-icon-menu",layers:[]}},mounted:function(){console.log("feedsMarkFormLayers.vue","mounted...",this.layers)},methods:{toggleLayer:function(t){"show"==t?(this.layer_css="layer opened",this.setLayers()):this.layer_css="layer"},setLayers:function(){this.isSetLayers=!1;var t=[];Object.assign(t,this.canvas.getObjects()),t.reverse(),this.layers=t,console.log("this.layers",this.layers)},datadragEnd:function(t){var e=[];Object.assign(e,this.layers),e.reverse();var i=this;i.canvas.loadFromJSON(JSON.stringify({objects:e}),function(){i.canvas.renderAll()})},getLayerView:function(t){return"<a>"+t.type+"</a>"}}}}});
//# sourceMappingURL=1.build.js.map?937ed84d3195f29e202d