webpackJsonp([1],{100:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=(n(o),i(89)),r=n(a),s=i(157),l=n(s);t.default={components:{draggable:r.default,feedsMarkFormLayersItem:l.default},props:["canvas"],data:function(){return{layer_css:"layer",layer_icon_css:"el-icon-menu",layers:[]}},mounted:function(){console.log("feedsMarkFormLayers.vue","mounted...",this.layers)},methods:{toggleLayer:function(e){"show"==e?(this.layer_css="layer opened",this.setLayers()):this.layer_css="layer"},setLayers:function(){this.isSetLayers=!1;var e=[];Object.assign(e,this.canvas.getObjects()),e.reverse(),this.layers=e,console.log("this.layers",this.layers)},datadragEnd:function(e){var t=[];Object.assign(t,this.layers),t.reverse();var i=this;i.canvas.loadFromJSON(JSON.stringify({objects:t}),function(){i.canvas.renderAll()})},getLayerView:function(e){return"<a>"+e.type+"</a>"}}}},101:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);!function(e){e&&e.__esModule}(n);t.default={props:["layer"],data:function(){return{}},mounted:function(){console.log("feedsMarkFormLayersItem.vue","mounted...",this.layer)},methods:{}}},102:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={prop:["text","textAlign","fontFamily","backgroundColor","textBackgroundColor"],style:["opacity","fill","fontWeight","textDecoration","stroke","strokeWidth","fontSize","lineHeight","charSpacing","fontStyle","angle"]},o={},a={};for(var r in n)for(var s in n[r]){var l=n[r][s];["opacity","strokeWidth","fontSize","lineHeight","charSpacing","angle"].indexOf(l)>-1?(o[l]=0,a[l]=0):(o[l]="",a[l]="")}t.default={props:["canvas","image"],data:function(){return{fields:n,object:o,objectSelected:!1,background:{size:100,position:{x:0,y:0}}}},mounted:function(){this.getObjectAll()},methods:{initPage:function(e){console.log("feedsMarkFormScope.vue","initPage...",e),Object.assign(this.object,a),this.background=e||{size:100,position:{x:0,y:0}}},updateScope:function(){this.canvas.renderAll(),this.getObjectAll()},getActiveProp:function(e){if(!this.canvas)return!1;var t=this.canvas.getActiveObject();return t?t[e]||"":""},setActiveProp:function(e,t){if(this.canvas){var i=this.canvas.getActiveObject();i&&(i.set(e,t).setCoords(),this.canvas.renderAll())}},getActiveStyle:function(e,t){return this.canvas?(t=t||this.canvas.getActiveObject(),t?t.getSelectionStyles&&t.isEditing?t.getSelectionStyles()[e]||"":t[e]||"":""):""},setActiveStyle:function(e,t,i){if(!this.canvas)return"";if(i=i||this.canvas.getActiveObject()){if(i.setSelectionStyles&&i.isEditing){var n={};n[e]=t,i.setSelectionStyles(n),i.setCoords()}else i.set(e,t);i.setCoords(),this.canvas.renderAll()}},getObjectAll:function(){if(console.log("getObjectAll...."),this.canvas){var e=this.canvas.getActiveObject();if(!e)return void(this.objectSelected=!1);this.objectSelected=!0,console.log("canvas.getActiveObject",e);for(var t in this.fields)for(var i in this.fields[t]){var n=this.fields[t][i],o="prop"==t?this.getActiveProp(n):this.getActiveStyle(n);this.object[n]=o||a[n]}return this.object.type=e.type,console.log("this.object",this.object),this.object}},formatOpacityTooltip:function(e){return 100*e+" %"},getVal:function(e){return this.fields.prop.indexOf(e)>-1?this.getActiveProp(e):this.getActiveStyle(e)},setVal:function(e,t){this.fields.prop.indexOf(e)>-1?this.setActiveProp(e,t):this.setActiveStyle(e,t)},setValOpacity:function(e){this.setVal("opacity",e)},setValTextBackgroundColor:function(e){this.setVal("textBackgroundColor",e)},setValStroke:function(e){this.setVal("stroke",e)},setValFill:function(e){this.setVal("fill",e)},setValStrokeWidth:function(e){this.setVal("strokeWidth",e)},setValFontFamily:function(e){this.setVal("fontFamily",e)},setValTextAlign:function(e){this.setVal("textAlign",e)},setValBackgroundColor:function(e){this.setVal("backgroundColor",e)},setValFontSize:function(e){this.setVal("fontSize",e)},setValLineHeight:function(e){this.setVal("lineHeight",e)},setValCharSpacing:function(e){this.setVal("charSpacing",e)},setValText:function(e){try{"string"!=typeof e&&(e=e.target.value)}catch(t){e=""}console.log(arguments),this.setVal("text",e)},setValAngle:function(e){this.setVal("angle",e)},toggleTextStyle:function(e){e=e.split(":"),this.getVal(e[0])?this.setVal(e[0],""):this.setVal(e[0],e[1])},removeObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.canvas&&("ALL"==e&&confirm("Are you sure?")&&this.canvas.clear(),this.canvas.remove(this.canvas.getActiveObject()))},shadowify:function(){var e=this.canvas.getActiveObject();e&&(e.shadow?e.shadow=null:e.setShadow({color:"rgba(0,0,0,0.3)",blur:10,offsetX:10,offsetY:10}),this.canvas.renderAll())},setBackground:function(){this.$emit("setBackground")}}}},103:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=n(o),r=i(151),s=n(r);a.default.use(s.default,{preLoad:1.3,error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAA3NCSVQICAjb4U/gAAAABlBMVEX///+ZmZmOUEqyAAAAAnRSTlMA/1uRIrUAAAAJcEhZcwAACusAAArrAYKLDVoAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDkvMjAvMTIGkKG+AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAAB1JREFUCJljONjA8LiBoZyBwY6BQQZMAtlAkYMNAF1fBs/zPvcnAAAAAElFTkSuQmCC",loading:"http://img.zcool.cn/community/0161f656b0663e6ac7256cb052d31a.gif",attempt:0}),t.default={props:["viewImages"],data:function(){return{height:window.screen.height-300}},mounted:function(){},methods:{}}},119:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,"",""])},122:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".layer-menu{z-index:9998;position:absolute;right:5px;bottom:5px;width:32px;height:30px;overflow:hidden;padding:5px;background-color:#9cf;cursor:pointer}.layer-menu i{font-size:30px;color:#fff}.layer{z-index:9999;position:absolute;right:0;bottom:0;width:330px;height:700px;padding:5px;display:none;overflow:hidden;background-color:#9cf;cursor:pointer}.layer .layer-header{font-size:30px;color:#fff}.layer .layer-content{height:620px;overflow-x:hidden;overflow-y:auto;background-color:#90c0f0;padding-bottom:8px}.layer.opened,.layer:hover{display:block}.layer .layer-item{background-color:#9cf;margin:8px 8px 0;max-height:50px;overflow:hidden}.layer .layer-item .image{background-size:auto 100%}.layer .layer-item *{padding:8px}.layer .layer-footer{display:none;position:absolute;bottom:0;color:#9cf;overflow:hidden;height:40px;line-height:40px}.layer .layer-footer *{float:left}.layer .layer-footer i{width:100%;height:40px;overflow:hidden;display:block;line-height:40px;vertical-align:text-top}.layer .layer-footer i:before{font-size:30px;color:#fff}.layer .layer-footer:hover{color:red}.layer .layer-footer:hover i{line-height:40px;color:red}.layer .layer-footer:hover i:before{color:red}.layer .layer-footer div.layer-item{background-color:#903;margin:0;max-height:40px;width:200px}.layer .layer-footer div.layer-item *{padding:8px}",""])},124:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".viewImageDialog img{background-color:#9cf;border:1px dashed #999;width:100%}img[lazy=loading]{background-color:#9fcfff}img[lazy=loaded]{background-color:#fff}img[lazy=error]{background-color:red}",""])},127:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".el-slider{width:90%;margin-left:0;max-width:300px}#text-cmd-italic{font-style:italic}#text-cmd-underline{text-decoration:underline}#text-cmd-linethrough{text-decoration:line-through}#text-cmd-overline{text-decoration:overline}",""])},129:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".canvas-view{border:1px solid #ccc;overflow:hidden;position:relative}.canvas-view-feeds .el-select{width:100%}#text-controls{display:inline-block;vertical-align:top;border:1px dotted #ccc;padding:10px}#text-cmd-italic{font-style:italic}#text-cmd-underline{text-decoration:underline}#text-cmd-linethrough{text-decoration:line-through}#text-cmd-overline{text-decoration:overline}.popover-shape div{margin-bottom:10px}.right-controller{position:absolute;top:40px;right:5px;width:320px;height:384px;background-color:#efefef;overflow-y:auto;padding:8px;border:1px solid #ccc}.right-controller-but,.right-controller-but:active,.right-controller-but:focus,.right-controller-but:hover{float:right;border:1px solid #ccc;background-color:#efefef;color:#20a0ff;border-radius:0}",""])},134:function(e,t,i){t=e.exports=i(1)(),t.push([e.i,"canvas{border:1px solid #ccc}.el-popover div.img-mark{background-color:#fff;border:1px dashed #ccc}",""])},151:function(e,t,i){/*!
 * Vue-Lazyload.js v1.0.6
 * (c) 2017 Awe <hilongjw@gmail.com>
 * Released under the MIT License.
 */
!function(t,i){e.exports=i()}(0,function(){"use strict";function e(e,t){if(e.length){var i=e.indexOf(t);return i>-1?e.splice(i,1):void 0}}function t(e,t){if(!e||!t)return e||{};if(e instanceof Object)for(var i in t)e[i]=t[i];return e}function i(e,t){for(var i=!1,n=0,o=e.length;n<o;n++)if(t(e[n])){i=!0;break}return i}function n(e,t){if("IMG"===e.tagName&&e.getAttribute("data-srcset")){var i=e.getAttribute("data-srcset"),n=[],o=e.parentNode,a=o.offsetWidth*t,r=void 0,s=void 0,l=void 0;i=i.trim().split(","),i.map(function(e){e=e.trim(),r=e.lastIndexOf(" "),-1===r?(s=e,l=999998):(s=e.substr(0,r),l=parseInt(e.substr(r+1,e.length-r-2),10)),n.push([l,s])}),n.sort(function(e,t){if(e[0]<t[0])return-1;if(e[0]>t[0])return 1;if(e[0]===t[0]){if(-1!==t[1].indexOf(".webp",t[1].length-5))return 1;if(-1!==e[1].indexOf(".webp",e[1].length-5))return-1}return 0});for(var c="",d=void 0,u=n.length,h=0;h<u;h++)if(d=n[h],d[0]>=a){c=d[1];break}return c}}function o(e,t){for(var i=void 0,n=0,o=e.length;n<o;n++)if(t(e[n])){i=e[n];break}return i}function a(){if(!h)return!1;var e=!0,t=document;try{var i=t.createElement("object");i.type="image/webp",i.style.visibility="hidden",i.innerHTML="!",t.body.appendChild(i),e=!i.offsetWidth,t.body.removeChild(i)}catch(t){e=!1}return e}function r(e,t){var i=null,n=0;return function(){if(!i){var o=Date.now()-n,a=this,r=arguments,s=function(){n=Date.now(),i=!1,e.apply(a,r)};o>=t?s():i=setTimeout(s,t)}}}function s(e){return null!==e&&"object"===(void 0===e?"undefined":c(e))}function l(e){if(!(e instanceof Object))return[];if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h="undefined"!=typeof window,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h&&window.devicePixelRatio||e},p=function(){if(h){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}}(),g={on:function(e,t,i){p?e.addEventListener(t,i,{passive:!0}):e.addEventListener(t,i,!1)},off:function(e,t,i){e.removeEventListener(t,i)}},v=function(e,t,i){var n=new Image;n.src=e.src,n.onload=function(){t({naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,src:n.src})},n.onerror=function(e){i(e)}},m=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},b=function(e){return m(e,"overflow")+m(e,"overflow-y")+m(e,"overflow-x")},y=function(e){if(h){if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(b(t)))return t;t=t.parentNode}return window}},_={},x=function(){function e(t){var i=t.el,n=t.src,o=t.error,a=t.loading,r=t.bindType,s=t.$parent,l=t.options,c=t.elRenderer;d(this,e),this.el=i,this.src=n,this.error=o,this.loading=a,this.bindType=r,this.attempt=0,this.naturalHeight=0,this.naturalWidth=0,this.options=l,this.filter(),this.initState(),this.performanceData={init:Date.now(),loadStart:null,loadEnd:null},this.rect=i.getBoundingClientRect(),this.$parent=s,this.elRenderer=c,this.render("loading",!1)}return u(e,[{key:"initState",value:function(){this.state={error:!1,loaded:!1,rendered:!1}}},{key:"record",value:function(e){this.performanceData[e]=Date.now()}},{key:"update",value:function(e){var t=e.src,i=e.loading,n=e.error,o=this.src;this.src=t,this.loading=i,this.error=n,this.filter(),o!==this.src&&(this.attempt=0,this.initState())}},{key:"getRect",value:function(){this.rect=this.el.getBoundingClientRect()}},{key:"checkInView",value:function(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>this.options.preLoadTop&&this.rect.left<window.innerWidth*this.options.preLoad&&this.rect.right>0}},{key:"filter",value:function(){var e=this;l(this.options.filter).map(function(t){e.options.filter[t](e,e.options)})}},{key:"renderLoading",value:function(e){var t=this;v({src:this.loading},function(i){t.render("loading",!1),e()})}},{key:"load",value:function(){var e=this;return this.attempt>this.options.attempt-1&&this.state.error?void(this.options.silent||console.log("error end")):this.state.loaded||_[this.src]?this.render("loaded",!0):void this.renderLoading(function(){e.attempt++,e.record("loadStart"),v({src:e.src},function(t){e.naturalHeight=t.naturalHeight,e.naturalWidth=t.naturalWidth,e.state.loaded=!0,e.state.error=!1,e.record("loadEnd"),e.render("loaded",!1),_[e.src]=1},function(t){e.state.error=!0,e.state.loaded=!1,e.render("error",!1)})})}},{key:"render",value:function(e,t){this.elRenderer(this,e,t)}},{key:"performance",value:function(){var e="loading",t=0;return this.state.loaded&&(e="loaded",t=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(e="error"),{src:this.src,state:e,time:t}}},{key:"destroy",value:function(){this.el=null,this.src=null,this.error=null,this.loading=null,this.bindType=null,this.attempt=0}}]),e}(),k="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",w=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],C=function(l){return function(){function c(e){var t=this,i=e.preLoad,n=e.error,o=e.preLoadTop,s=e.dispatchEvent,l=e.loading,u=e.attempt,h=e.silent,p=e.scale,g=e.listenEvents,v=(e.hasbind,e.filter),m=e.adapter;d(this,c),this.version="1.0.6",this.ListenerQueue=[],this.TargetIndex=0,this.TargetQueue=[],this.options={silent:h||!0,dispatchEvent:!!s,preLoad:i||1.3,preLoadTop:o||0,error:n||k,loading:l||k,attempt:u||3,scale:p||f(p),ListenEvents:g||w,hasbind:!1,supportWebp:a(),filter:v||{},adapter:m||{}},this._initEvent(),this.lazyLoadHandler=r(function(){var e=!1;t.ListenerQueue.forEach(function(t){t.state.loaded||(e=t.checkInView())&&t.load()})},200)}return u(c,[{key:"config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this.options,e)}},{key:"performance",value:function(){var e=[];return this.ListenerQueue.map(function(t){e.push(t.performance())}),e}},{key:"addLazyBox",value:function(e){this.ListenerQueue.push(e),h&&(this._addListenerTarget(window),e.$el&&e.$el.parentNode&&this._addListenerTarget(e.$el.parentNode))}},{key:"add",value:function(e,t,o){var a=this;if(i(this.ListenerQueue,function(t){return t.el===e}))return this.update(e,t),l.nextTick(this.lazyLoadHandler);var r=this._valueFormatter(t.value),s=r.src,c=r.loading,d=r.error;l.nextTick(function(){s=n(e,a.options.scale)||s;var i=Object.keys(t.modifiers)[0],r=void 0;i&&(r=o.context.$refs[i],r=r?r.$el||r:document.getElementById(i)),r||(r=y(e));var u=new x({bindType:t.arg,$parent:r,el:e,loading:c,error:d,src:s,elRenderer:a._elRenderer.bind(a),options:a.options});a.ListenerQueue.push(u),h&&(a._addListenerTarget(window),a._addListenerTarget(r)),a.lazyLoadHandler(),l.nextTick(function(){return a.lazyLoadHandler()})})}},{key:"update",value:function(e,t){var i=this,a=this._valueFormatter(t.value),r=a.src,s=a.loading,c=a.error;r=n(e,this.options.scale)||r;var d=o(this.ListenerQueue,function(t){return t.el===e});d&&d.update({src:r,loading:s,error:c}),this.lazyLoadHandler(),l.nextTick(function(){return i.lazyLoadHandler()})}},{key:"remove",value:function(t){if(t){var i=o(this.ListenerQueue,function(e){return e.el===t});i&&(this._removeListenerTarget(i.$parent),this._removeListenerTarget(window),e(this.ListenerQueue,i)&&i.destroy())}}},{key:"removeComponent",value:function(t){t&&(e(this.ListenerQueue,t),t.$parent&&t.$el.parentNode&&this._removeListenerTarget(t.$el.parentNode),this._removeListenerTarget(window))}},{key:"_addListenerTarget",value:function(e){if(e){var t=o(this.TargetQueue,function(t){return t.el===e});return t?t.childrenCount++:(t={el:e,id:++this.TargetIndex,childrenCount:1,listened:!0},this._initListen(t.el,!0),this.TargetQueue.push(t)),this.TargetIndex}}},{key:"_removeListenerTarget",value:function(e){var t=this;this.TargetQueue.forEach(function(i,n){i.el===e&&(--i.childrenCount||(t._initListen(i.el,!1),t.TargetQueue.splice(n,1),i=null))})}},{key:"_initListen",value:function(e,t){var i=this;this.options.ListenEvents.forEach(function(n){return g[t?"on":"off"](e,n,i.lazyLoadHandler)})}},{key:"_initEvent",value:function(){var t=this;this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=function(e,i){t.Event.listeners[e].push(i)},this.$once=function(e,i){function n(){o.$off(e,n),i.apply(o,arguments)}var o=t;t.$on(e,n)},this.$off=function(i,n){return n?void e(t.Event.listeners[i],n):void(t.Event.listeners[i]=[])},this.$emit=function(e,i,n){t.Event.listeners[e].forEach(function(e){return e(i,n)})}}},{key:"_elRenderer",value:function(e,t,i){if(e.el){var n=e.el,o=e.bindType,a=void 0;switch(t){case"loading":a=e.loading;break;case"error":a=e.error;break;default:a=e.src}if(o?n.style[o]="url("+a+")":n.getAttribute("src")!==a&&n.setAttribute("src",a),n.setAttribute("lazy",t),this.$emit(t,e,i),this.options.adapter[t]&&this.options.adapter[t](e,this.options),this.options.dispatchEvent){var r=new CustomEvent(t,{detail:e});n.dispatchEvent(r)}}}},{key:"_valueFormatter",value:function(e){var t=e,i=this.options.loading,n=this.options.error;return s(e)&&(e.src||this.options.silent||console.error("Vue Lazyload warning: miss src with "+e),t=e.src,i=e.loading||this.options.loading,n=e.error||this.options.error),{src:t,loading:i,error:n}}}]),c}()},S=function(e){return{props:{tag:{type:String,default:"div"}},render:function(e){return!1===this.show?e(this.tag):e(this.tag,null,this.$slots.default)},data:function(){return{state:{loaded:!1},rect:{},show:!1}},mounted:function(){e.addLazyBox(this),e.lazyLoadHandler()},beforeDestroy:function(){e.removeComponent(this)},methods:{getRect:function(){this.rect=this.$el.getBoundingClientRect()},checkInView:function(){return this.getRect(),h&&this.rect.top<window.innerHeight*e.options.preLoad&&this.rect.bottom>0&&this.rect.left<window.innerWidth*e.options.preLoad&&this.rect.right>0},load:function(){this.show=!0,this.state.loaded=!0,this.$emit("show",this)}}}};return{install:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=C(e),o=new n(i),a="2"===e.version.split(".")[0];e.prototype.$Lazyload=o,i.lazyComponent&&e.component("lazy-component",S(o)),a?e.directive("lazy",{bind:o.add.bind(o),update:o.update.bind(o),componentUpdated:o.lazyLoadHandler.bind(o),unbind:o.remove.bind(o)}):e.directive("lazy",{bind:o.lazyLoadHandler.bind(o),update:function(e,i){t(this.vm.$refs,this.vm.$els),o.add(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:e,oldValue:i},{context:this.vm})},unbind:function(){o.remove(this.el)}})}}})},155:function(e,t,i){i(197);var n=i(2)(i(99),i(173),null,null);e.exports=n.exports},156:function(e,t,i){i(190);var n=i(2)(i(100),i(166),null,null);e.exports=n.exports},157:function(e,t,i){i(187);var n=i(2)(i(101),i(163),null,null);e.exports=n.exports},158:function(e,t,i){i(195);var n=i(2)(i(102),i(171),null,null);e.exports=n.exports},159:function(e,t,i){i(192);var n=i(2)(i(103),i(168),null,null);e.exports=n.exports},163:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["textbox"==e.layer.type?i("span",{style:{color:e.layer.fill}},[e._v(e._s(e.layer.text))]):e._e(),e._v(" "),"image"==e.layer.type?i("div",{staticClass:"image",style:{"background-image":"url("+e.layer.getSrc()+")"}},[e._v("\n         \n    ")]):e._e(),e._v(" "),"line"==e.layer.type?i("div",{style:{color:"#fff","background-color":e.layer.stroke}},[e._v(e._s(e.layer.type))]):e._e(),e._v(" "),"triangle"==e.layer.type||"circle"==e.layer.type||"rect"==e.layer.type?i("div",{style:{color:"#fff","background-color":e.layer.fill}},[e._v(e._s(e.layer.type))]):e._e()])},staticRenderFns:[]}},166:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"layer-menu",on:{click:function(t){e.toggleLayer("show")}}},[i("i",{staticClass:"el-icon-menu",attrs:{title:"layer"}})]),e._v(" "),i("div",{class:e.layer_css,on:{mouseover:function(t){e.toggleLayer("hide")},mouseout:function(t){e.toggleLayer("hide")}}},[i("div",{staticClass:"layer-header",on:{click:e.toggleLayer}},[i("i",{class:e.layer_icon_css,attrs:{title:"layer"}}),e._v("\n            Layers\n        ")]),e._v(" "),i("div",{staticClass:"layer-content"},[i("draggable",{attrs:{options:{group:"layers"}},on:{update:e.datadragEnd},model:{value:e.layers,callback:function(t){e.layers=t},expression:"layers"}},[i("transition-group",e._l(e.layers,function(e,t){return i("div",{key:t,staticClass:"layer-item"},[i("feedsMarkFormLayersItem",{attrs:{layer:e}})],1)}))],1)],1),e._v(" "),i("div",{staticClass:"layer-footer"},[i("draggable",{attrs:{options:{group:"layers"}}},[i("div",[i("i",{staticClass:"el-icon-delete",attrs:{title:"layer"}},[e._v("\n                    拖放至此\n                ")])])])],1)])])},staticRenderFns:[]}},168:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewImageDialog",style:"height:"+e.height+"px;overflow-y:auto;overflow-x:hidden;"},[e.viewImages.length>0?i("el-row",{attrs:{gutter:24,justify:"center"}},e._l(e.viewImages,function(e){return i("el-col",{key:"key",attrs:{span:6}},[i("div",{staticClass:"grid-content bg-purple"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"src"}]})])])})):i("div",[i("h2",[e._v("loading...")])])],1)},staticRenderFns:[]}},171:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.objectSelected,expression:"objectSelected"}],ref:"object",attrs:{"label-position":"top",model:e.object}},["image"!=e.object.type?i("el-form-item",{attrs:{label:"Fill / Stroke / Background"}},[i("div",[i("el-color-picker",{on:{change:e.setValFill},model:{value:e.object.fill,callback:function(t){e.object.fill=t},expression:"object.fill"}}),e._v(" "),i("el-color-picker",{on:{change:e.setValStroke},model:{value:e.object.stroke,callback:function(t){e.object.stroke=t},expression:"object.stroke"}}),e._v(" "),i("el-color-picker",{on:{change:e.setValTextBackgroundColor},model:{value:e.object.textBackgroundColor,callback:function(t){e.object.textBackgroundColor=t},expression:"object.textBackgroundColor"}})],1)]):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"Opacity"}},[i("el-slider",{attrs:{min:0,max:1,step:.05,"format-tooltip":e.formatOpacityTooltip},on:{change:e.setValOpacity},model:{value:e.object.opacity,callback:function(t){e.object.opacity=t},expression:"object.opacity"}})],1),e._v(" "),"image"!=e.object.type?i("el-form-item",{attrs:{label:"Stroke width"}},[i("el-slider",{attrs:{min:0,max:20,step:1},on:{change:e.setValStrokeWidth},model:{value:e.object.strokeWidth,callback:function(t){e.object.strokeWidth=t},expression:"object.strokeWidth"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"Angle"}},[i("el-slider",{attrs:{min:0,max:360,step:5},on:{change:e.setValAngle},model:{value:e.object.angle,callback:function(t){e.object.angle=t},expression:"object.angle"}})],1),e._v(" "),"textbox"==e.object.type?i("div",{attrs:{id:"text-wrapper"}},[i("div",{attrs:{id:"text-controls"}},[i("p",[e._v("Text specific controls")]),e._v(" "),i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},on:{change:e.setValText},model:{value:e.object.text,callback:function(t){e.object.text=t},expression:"object.text"}}),e._v(" "),i("el-form-item",{attrs:{label:"Font family"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.setValFontFamily},model:{value:e.object.fontFamily,callback:function(t){e.object.fontFamily=t},expression:"object.fontFamily"}},[i("el-option",{attrs:{value:"arial"}},[e._v("Arial")]),e._v(" "),i("el-option",{attrs:{value:"helvetica"}},[e._v("Helvetica")]),e._v(" "),i("el-option",{attrs:{value:"myriad pro"}},[e._v("Myriad Pro")]),e._v(" "),i("el-option",{attrs:{value:"delicious"}},[e._v("Delicious")]),e._v(" "),i("el-option",{attrs:{value:"verdana"}},[e._v("Verdana")]),e._v(" "),i("el-option",{attrs:{value:"georgia"}},[e._v("Georgia")]),e._v(" "),i("el-option",{attrs:{value:"courier"}},[e._v("Courier")]),e._v(" "),i("el-option",{attrs:{value:"comic sans ms"}},[e._v("Comic Sans MS")]),e._v(" "),i("el-option",{attrs:{value:"impact"}},[e._v("Impact")]),e._v(" "),i("el-option",{attrs:{value:"monaco"}},[e._v("Monaco")]),e._v(" "),i("el-option",{attrs:{value:"optima"}},[e._v("Optima")]),e._v(" "),i("el-option",{attrs:{value:"hoefler text"}},[e._v("Hoefler Text")]),e._v(" "),i("el-option",{attrs:{value:"plaster"}},[e._v("Plaster")]),e._v(" "),i("el-option",{attrs:{value:"engagement"}},[e._v("Engagement")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Text align"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.setValTextAlign},model:{value:e.object.textAlign,callback:function(t){e.object.textAlign=t},expression:"object.textAlign"}},[i("el-option",{attrs:{value:"left"}},[e._v("Left")]),e._v(" "),i("el-option",{attrs:{value:"center"}},[e._v("Center")]),e._v(" "),i("el-option",{attrs:{value:"right"}},[e._v("Right")]),e._v(" "),i("el-option",{attrs:{value:"justify"}},[e._v("Justify")])],1)],1),e._v(" "),i("div",[i("label",{attrs:{for:"text-lines-bg-color"}},[e._v("Background text color:")]),e._v(" "),i("el-color-picker",{on:{change:e.setValBackgroundColor},model:{value:e.object.backgroundColor,callback:function(t){e.object.backgroundColor=t},expression:"object.backgroundColor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Font size"}},[i("el-slider",{attrs:{min:8,max:70,step:1},on:{change:e.setValFontSize},model:{value:e.object.fontSize,callback:function(t){e.object.fontSize=t},expression:"object.fontSize"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Line height"}},[i("el-slider",{attrs:{min:0,max:10,step:.1},on:{change:e.setValLineHeight},model:{value:e.object.lineHeight,callback:function(t){e.object.lineHeight=t},expression:"object.lineHeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Char spacing"}},[i("el-slider",{attrs:{min:-10,max:200,step:5},on:{change:e.setValCharSpacing},model:{value:e.object.charSpacing,callback:function(t){e.object.charSpacing=t},expression:"object.charSpacing"}})],1),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.toggleTextStyle("fontWeight:bold")}}},[e._v("\n                    Bold\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-italic"},on:{click:function(t){e.toggleTextStyle("fontStyle:italic")}}},[e._v("\n                    Italic\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-underline"},on:{click:function(t){e.toggleTextStyle("textDecoration:underline")}}},[e._v("\n                    Underline\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-linethrough"},on:{click:function(t){e.toggleTextStyle("textDecoration:line-through")}}},[e._v("\n                    Linethrough\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",id:"text-cmd-overline"},on:{click:function(t){e.toggleTextStyle("textDecoration:overline")}}},[e._v("\n                    Overline\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.shadowify}},[e._v("阴 影")])],1)]):e._e(),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(t){e.removeObject()}}},[e._v("\n            删除选中的图层\n        ")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(t){e.removeObject("ALL")}}},[e._v("\n            删除所有的图层\n        ")])],1),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.objectSelected&&e.image.url,expression:"!objectSelected && image.url"}],ref:"object",attrs:{"label-position":"top",model:e.background}},[i("el-form-item",{attrs:{label:"素材图缩放"}},[i("el-slider",{attrs:{min:50,max:150,step:5},on:{change:e.setBackground},model:{value:e.background.size,callback:function(t){e.background.size=t},expression:"background.size"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"素材图水平位移"}},[i("el-slider",{attrs:{min:-50,max:e.image.width-0,step:5},on:{change:e.setBackground},model:{value:e.background.position.x,callback:function(t){e.background.position.x=t},expression:"background.position.x"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"素材图垂直位移"}},[i("el-slider",{attrs:{min:-50,max:e.image.height-0,step:5},on:{change:e.setBackground},model:{value:e.background.position.y,callback:function(t){e.background.position.y=t},expression:"background.position.y"}})],1)],1)],1)},staticRenderFns:[]}},173:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,"label-width":"120px",rules:e.rules}},[i("el-form-item",{attrs:{label:"Mark Name",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{staticClass:"canvas-view-feeds",attrs:{label:"画布尺寸",prop:"canvas_size"}},[i("el-select",{attrs:{placeholder:"画布尺寸"},on:{change:e.canvasSizeChange},model:{value:e.canvas_size,callback:function(t){e.canvas_size=t},expression:"canvas_size"}},[i("el-option",{key:"800x800",attrs:{value:"800x800",label:"800x800"}}),e._v(" "),i("el-option",{key:"1200x628",attrs:{value:"1200x628",label:"1200x628"}})],1)],1),e._v(" "),i("el-form-item",{staticClass:"canvas-view-feeds",attrs:{label:"Feeds",prop:"fid"}},[i("el-select",{attrs:{placeholder:"请选择Feed"},on:{change:e.feedChange},model:{value:e.form.fid,callback:function(t){e.form.fid=t},expression:"form.fid"}},e._l(e.feeds,function(e){return i("el-option",{key:e.id,attrs:{label:e.url,value:e.id}})}))],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.image.width,expression:"image.width"}],staticClass:"canvas-view"},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"background-color":"#cffffc",padding:"5px"}},[i("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:e.addTextbox}},[e._v("Add Text")]),e._v(" "),i("el-popover",{ref:"popover_image",attrs:{placement:"bottom",width:"220",trigger:"click"}},[i("el-row",{staticClass:"popover-shape",attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"picture"}},[e._v("\n                                前景图\n                            ")]),e._v(" "),i("input",{staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"100px",height:"25px",overflow:"hidden",position:"relative",top:"-30px"},attrs:{type:"file",id:"file"},on:{change:e.getFilePath}})],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"picture"}},[e._v("\n                                背景图\n                            ")]),e._v(" "),i("input",{staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"100px",height:"25px",overflow:"hidden",position:"relative",top:"-30px"},attrs:{type:"file",id:"file_bg"},on:{change:e.getFilePath}})],1)],1)],1),e._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover_image",arg:"popover_image"}],attrs:{type:"primary",icon:"star-on"}},[e._v("\n                    Add Image\n                ")]),e._v(" "),i("el-popover",{ref:"popover_shape",attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("el-row",{staticClass:"popover-shape",attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addShapeLine}},[e._v("直 线")])],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addShapeRect}},[e._v("四边形")])],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addShapeCircle}},[e._v("圆 形")])],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addShapeTriangle}},[e._v("三角形")])],1)],1)],1),e._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover_shape",arg:"popover_shape"}],attrs:{type:"primary",icon:"star-on"}},[e._v("\n                    Add Shape\n                ")]),e._v(" "),i("el-button",{staticClass:"right-controller-but",attrs:{type:"primary",icon:"setting"},on:{click:e.toggleRightController}},[e._v("\n                    "+e._s(e.rightController?"隐藏":"显示")+"\n                ")])],1),e._v(" "),i("el-row",{attrs:{gutter:22}},[i("el-col",{attrs:{span:22}},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"min-height":"400px"}},[i("div",{style:e.backgroundImageStyle(),attrs:{height:e.image.height,width:e.image.width}},[i("canvas",{style:e.imageStyle,attrs:{height:e.image.height,width:e.image.width,id:"tu"}})]),e._v(" "),i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.imageStyle,expression:"imageStyle"}],attrs:{type:"text",icon:"caret-right"},on:{click:e.flushImage}},[e._v("\n                                换个素材看看效果")])],1)])])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.rightController,expression:"rightController"}],staticClass:"right-controller"},[i("feedsMarkFormScope",{ref:"feedsMarkFormScope",attrs:{canvas:e.canvas,image:e.image},on:{setBackground:e.setBackground}})],1),e._v(" "),i("feedsMarkFormLayers",{ref:"feedsMarkFormLayers",attrs:{canvas:e.canvas}})],1)],1)],1)},staticRenderFns:[]}},178:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mytable"},[i("v-headerTop"),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:4}},[i("div",{staticClass:"grid-left bg-purple-darkc overflow-y",attrs:{id:"app_left_menu"}},[i("v-leftMenu")],1)]),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{padding:"10px"}},[i("el-button",{staticStyle:{float:"right","z-index":"1",position:"relative"},attrs:{type:"primary"},on:{click:function(t){e.openDialog(-1)}}},[i("i",{staticClass:"el-icon-plus"}),e._v("Add Feed Mark")]),e._v(" "),i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"Feed Mark Lists",name:"getRulesData"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rulesData,border:"","max-height":"100%"}},[i("el-table-column",{attrs:{width:"110",label:"Thumb"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[i("div",{staticClass:"img-mark"},[i("img",{staticStyle:{"max-width":"500px"},attrs:{src:t.row.mark_img_path}})]),e._v(" "),i("div",{slot:"reference"},[i("img",{attrs:{height:"100",src:t.row.mark_img_path}})])])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Mark Name",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Img Size",width:"120",formatter:e.formatCanvasSize}}),e._v(" "),i("el-table-column",{attrs:{prop:"mark_url",label:"Mark URL"}}),e._v(" "),i("el-table-column",{attrs:{label:"Feed URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                ["+e._s(t.row.brand)+"] "+e._s(t.row.url)+"\n                            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"count_items",label:"商品数",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),e.openDialog(t.$index,e.rulesData)}}},[e._v("\n                                    修改\n                                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),e.openDialog(t.$index,e.rulesData,!0)}}},[e._v("\n                                    复制\n                                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),e.viewImageDialog(t.$index,e.rulesData)}}},[e._v("\n                                    预览\n                                ")])]}}])})],1)],1)],1)],1)]),e._v(" "),i("el-dialog",{attrs:{title:"Update Feed Mark",visible:e.dialogTableVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,size:"large"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("feedsMarkForm",{ref:"feedsMarkForm",attrs:{form:e.form,feeds:e.feeds}}),e._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.updateDialog}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"View Feed Mark",visible:e.viewImageDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,size:"full"},on:{"update:visible":function(t){e.viewImageDialogVisible=t}}},[i("viewImageDialog",{ref:"viewImageDialog",attrs:{viewImages:e.viewImages}}),e._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:e.closeViewImageDialog}},[e._v("关 闭")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.viewImageDialog}},[e._v("换一批")])],1)],1)],1)},staticRenderFns:[]}},187:function(e,t,i){var n=i(119);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("f2098072",n,!0)},190:function(e,t,i){var n=i(122);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("7be9db10",n,!0)},192:function(e,t,i){var n=i(124);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("d2e08a4c",n,!0)},195:function(e,t,i){var n=i(127);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("2bcf7f64",n,!0)},197:function(e,t,i){var n=i(129);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("0f18351e",n,!0)},202:function(e,t,i){var n=i(134);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(4)("904de3d2",n,!0)},67:function(e,t,i){i(202);var n=i(2)(i(98),i(178),null,null);e.exports=n.exports},87:function(e,t,i){var n,o;/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(a){"use strict";n=a,void 0!==(o="function"==typeof n?n.call(t,i,t,e):n)&&(e.exports=o)}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=y({},t),e[U]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i)!(n in t)&&(t[n]=i[n]);re(t);for(var o in this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&q,a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),a(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(a(e,"dragover",this),a(e,"dragenter",this)),oe.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),S&&S.state!==t&&(l(S,"display",t?"none":""),t||S.state&&(e.options.group.revertClone?(A.insertBefore(S,D),e._animate(k,S)):A.insertBefore(S,k)),S.state=t)}function i(e,t,i){if(e){i=i||Q;do{if(">*"===t&&e.parentNode===i||m(e,t))return e}while(e=n(e))}return null}function n(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function a(e,t,i){e.addEventListener(t,i,G)}function r(e,t,i){e.removeEventListener(t,i,G)}function s(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(H," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(H," ")}}function l(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return Q.defaultView&&Q.defaultView.getComputedStyle?i=Q.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function c(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,a=n.length;if(i)for(;o<a;o++)i(n[o],o);return n}return[]}function d(e,t,i,n,o,a,r){e=e||t[U];var s=Q.createEvent("Event"),l=e.options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);s.initEvent(i,!0,!0),s.to=t,s.from=o||t,s.item=n||t,s.clone=S,s.oldIndex=a,s.newIndex=r,t.dispatchEvent(s),l[c]&&l[c].call(e,s)}function u(e,t,i,n,o,a,r,s){var l,c,d=e[U],u=d.options.onMove;return l=Q.createEvent("Event"),l.initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=o||t,l.relatedRect=a||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(c=u.call(d,l,r)),c}function h(e){e.draggable=!1}function f(){ee=!1}function p(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function v(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!m(e,t)||i++;return i}function m(e,t){if(e){t=t.split(".");var i=t.shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==i&&e.nodeName.toUpperCase()!=i||t.length&&((" "+e.className+" ").match(n)||[]).length!=t.length)}return!1}function b(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function y(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function _(e){return J?J(e).clone(!0)[0]:Z&&Z.dom?Z.dom(e).cloneNode(!0):e.cloneNode(!0)}function x(e){for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&ne.push(n)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var k,w,C,S,A,D,T,I,j,L,E,F,M,O,z,V,R,B,N,$,P={},H=/\s+/g,W=/left|right|inline/,U="Sortable"+(new Date).getTime(),Y=window,Q=Y.document,X=Y.parseInt,J=Y.jQuery||Y.Zepto,Z=Y.Polymer,G=!1,q=!!("draggable"in Q.createElement("div")),K=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=Q.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ee=!1,te=Math.abs,ie=Math.min,ne=[],oe=[],ae=b(function(e,t,i){if(i&&t.scroll){var n,o,a,r,s,l,c=i[U],d=t.scrollSensitivity,u=t.scrollSpeed,h=e.clientX,f=e.clientY,p=window.innerWidth,g=window.innerHeight;if(j!==i&&(I=t.scroll,j=i,L=t.scrollFn,!0===I)){I=i;do{if(I.offsetWidth<I.scrollWidth||I.offsetHeight<I.scrollHeight)break}while(I=I.parentNode)}I&&(n=I,o=I.getBoundingClientRect(),a=(te(o.right-h)<=d)-(te(o.left-h)<=d),r=(te(o.bottom-f)<=d)-(te(o.top-f)<=d)),a||r||(a=(p-h<=d)-(h<=d),r=(g-f<=d)-(f<=d),(a||r)&&(n=Y)),P.vx===a&&P.vy===r&&P.el===n||(P.el=n,P.vx=a,P.vy=r,clearInterval(P.pid),n&&(P.pid=setInterval(function(){if(l=r?r*u:0,s=a?a*u:0,"function"==typeof L)return L.call(c,s,l,e);n===Y?Y.scrollTo(Y.pageXOffset+s,Y.pageYOffset+l):(n.scrollTop+=l,n.scrollLeft+=s)},24)))}},30),re=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=i.name),"function"==typeof e?e:function(i,n){var o=n.options.group.name;return t?e:e&&(e.join?e.indexOf(o)>-1:o==e)}}var i={},n=e.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i};e.prototype={constructor:e,_onTapStart:function(e){var t,n=this,o=this.el,a=this.options,r=a.preventOnFilter,s=e.type,l=e.touches&&e.touches[0],c=(l||e).target,u=e.target.shadowRoot&&e.path&&e.path[0]||c,h=a.filter;if(x(o),!k&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||a.disabled)&&(c=i(c,a.draggable,o))&&T!==c){if(t=v(c,a.draggable),"function"==typeof h){if(h.call(this,e,c,this))return d(n,u,"filter",c,o,t),void(r&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=i(u,e.trim(),o))return d(n,e,"filter",c,o,t),!0})))return void(r&&e.preventDefault());a.handle&&!i(u,a.handle,o)||this._prepareDragStart(e,l,c,t)}},_prepareDragStart:function(e,t,i,n){var o,r=this,l=r.el,u=r.options,f=l.ownerDocument;i&&!k&&i.parentNode===l&&(B=e,A=l,k=i,w=k.parentNode,D=k.nextSibling,T=i,V=u.group,O=n,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,k.style["will-change"]="transform",o=function(){r._disableDelayedDrag(),k.draggable=r.nativeDraggable,s(k,u.chosenClass,!0),r._triggerDragStart(e,t),d(r,A,"choose",k,A,O)},u.ignore.split(",").forEach(function(e){c(k,e.trim(),h)}),a(f,"mouseup",r._onDrop),a(f,"touchend",r._onDrop),a(f,"touchcancel",r._onDrop),a(f,"pointercancel",r._onDrop),a(f,"selectstart",r),u.delay?(a(f,"mouseup",r._disableDelayedDrag),a(f,"touchend",r._disableDelayedDrag),a(f,"touchcancel",r._disableDelayedDrag),a(f,"mousemove",r._disableDelayedDrag),a(f,"touchmove",r._disableDelayedDrag),a(f,"pointermove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(o,u.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag),r(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?(B={target:k,clientX:t.clientX,clientY:t.clientY},this._onDragStart(B,"touch")):this.nativeDraggable?(a(k,"dragend",this),a(A,"dragstart",this._onDragStart)):this._onDragStart(B,!0);try{Q.selection?setTimeout(function(){Q.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(A&&k){var t=this.options;s(k,t.ghostClass,!0),s(k,t.dragClass,!1),e.active=this,d(this,A,"start",k,A,O)}else this._nulling()},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,K||l(C,"display","none");var e=Q.elementFromPoint(N.clientX,N.clientY),t=e,i=oe.length;if(t)do{if(t[U]){for(;i--;)oe[i]({clientX:N.clientX,clientY:N.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);K||l(C,"display","")}},_onTouchMove:function(t){if(B){var i=this.options,n=i.fallbackTolerance,o=i.fallbackOffset,a=t.touches?t.touches[0]:t,r=a.clientX-B.clientX+o.x,s=a.clientY-B.clientY+o.y,c=t.touches?"translate3d("+r+"px,"+s+"px,0)":"translate("+r+"px,"+s+"px)";if(!e.active){if(n&&ie(te(a.clientX-this._lastX),te(a.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),$=!0,N=a,l(C,"webkitTransform",c),l(C,"mozTransform",c),l(C,"msTransform",c),l(C,"transform",c),t.preventDefault()}},_appendGhost:function(){if(!C){var e,t=k.getBoundingClientRect(),i=l(k),n=this.options;C=k.cloneNode(!0),s(C,n.ghostClass,!1),s(C,n.fallbackClass,!0),s(C,n.dragClass,!0),l(C,"top",t.top-X(i.marginTop,10)),l(C,"left",t.left-X(i.marginLeft,10)),l(C,"width",t.width),l(C,"height",t.height),l(C,"opacity","0.8"),l(C,"position","fixed"),l(C,"zIndex","100000"),l(C,"pointerEvents","none"),n.fallbackOnBody&&Q.body.appendChild(C)||A.appendChild(C),e=C.getBoundingClientRect(),l(C,"width",2*t.width-e.width),l(C,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var i=e.dataTransfer,n=this.options;this._offUpEvents(),V.checkPull(this,this,k,e)&&(S=_(k),S.draggable=!1,S.style["will-change"]="",l(S,"display","none"),s(S,this.options.chosenClass,!1),A.insertBefore(S,k),d(this,A,"clone",k)),s(k,n.dragClass,!0),t?("touch"===t?(a(Q,"touchmove",this._onTouchMove),a(Q,"touchend",this._onDrop),a(Q,"touchcancel",this._onDrop),a(Q,"pointermove",this._onTouchMove),a(Q,"pointerup",this._onDrop)):(a(Q,"mousemove",this._onTouchMove),a(Q,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,k)),a(Q,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(n){var o,a,r,s,c=this.el,d=this.options,h=d.group,g=e.active,v=V===h,m=!1,b=d.sort;if(void 0!==n.preventDefault&&(n.preventDefault(),!d.dragoverBubble&&n.stopPropagation()),!k.animated&&($=!0,g&&!d.disabled&&(v?b||(s=!A.contains(k)):R===this||(g.lastPullMode=V.checkPull(this,g,k,n))&&h.checkPut(this,g,k,n))&&(void 0===n.rootEl||n.rootEl===this.el))){if(ae(n,d,this.el),ee)return;if(o=i(n.target,d.draggable,c),a=k.getBoundingClientRect(),R!==this&&(R=this,m=!0),s)return t(g,!0),w=A,void(S||D?A.insertBefore(k,S||D):b||A.appendChild(k));if(0===c.children.length||c.children[0]===C||c===n.target&&p(c,n)){if(0!==c.children.length&&c.children[0]!==C&&c===n.target&&(o=c.lastElementChild),o){if(o.animated)return;r=o.getBoundingClientRect()}t(g,v),!1!==u(A,c,k,a,o,r,n)&&(k.contains(c)||(c.appendChild(k),w=c),this._animate(a,k),o&&this._animate(r,o))}else if(o&&!o.animated&&o!==k&&void 0!==o.parentNode[U]){E!==o&&(E=o,F=l(o),M=l(o.parentNode)),r=o.getBoundingClientRect();var y=r.right-r.left,_=r.bottom-r.top,x=W.test(F.cssFloat+F.display)||"flex"==M.display&&0===M["flex-direction"].indexOf("row"),T=o.offsetWidth>k.offsetWidth,I=o.offsetHeight>k.offsetHeight,j=(x?(n.clientX-r.left)/y:(n.clientY-r.top)/_)>.5,L=o.nextElementSibling,O=!1;if(x){var z=k.offsetTop,B=o.offsetTop;O=z===B?o.previousElementSibling===k&&!T||j&&T:o.previousElementSibling===k||k.previousElementSibling===o?(n.clientY-r.top)/_>.5:B>z}else m||(O=L!==k&&!I||j&&I);var N=u(A,c,k,a,o,r,n,O);!1!==N&&(1!==N&&-1!==N||(O=1===N),ee=!0,setTimeout(f,30),t(g,v),k.contains(c)||(O&&!L?c.appendChild(k):o.parentNode.insertBefore(k,O?L:o)),w=k.parentNode,this._animate(a,k),this._animate(r,o))}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),l(t,"transition","none"),l(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,l(t,"transition","all "+i+"ms"),l(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){l(t,"transition",""),l(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(Q,"touchmove",this._onTouchMove),r(Q,"pointermove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"pointerup",this._onDrop),r(e,"touchcancel",this._onDrop),r(e,"pointercancel",this._onDrop),r(e,"selectstart",this)},_onDrop:function(t){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(P.pid),clearTimeout(this._dragStartTimer),r(Q,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(Q,"drop",this),r(i,"dragstart",this._onDragStart)),this._offUpEvents(),t&&($&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),A!==w&&"clone"===e.active.lastPullMode||S&&S.parentNode&&S.parentNode.removeChild(S),k&&(this.nativeDraggable&&r(k,"dragend",this),h(k),k.style["will-change"]="",s(k,this.options.ghostClass,!1),s(k,this.options.chosenClass,!1),d(this,A,"unchoose",k,A,O),A!==w?(z=v(k,n.draggable))>=0&&(d(null,w,"add",k,A,O,z),d(this,A,"remove",k,A,O,z),d(null,w,"sort",k,A,O,z),d(this,A,"sort",k,A,O,z)):k.nextSibling!==D&&(z=v(k,n.draggable))>=0&&(d(this,A,"update",k,A,O,z),d(this,A,"sort",k,A,O,z)),e.active&&(null!=z&&-1!==z||(z=O),d(this,A,"end",k,A,O,z),this.save()))),this._nulling()},_nulling:function(){A=k=w=C=D=S=T=I=j=B=N=$=z=E=F=R=V=e.active=null,ne.forEach(function(e){e.checked=!0}),ne.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":k&&(this._onDragOver(e),o(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,r=this.options;o<a;o++)e=n[o],i(e,r.draggable,this.el)&&t.push(e.getAttribute(r.dataIdAttr)||g(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,o){var a=n.children[o];i(a,this.options.draggable,n)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return i(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&re(i)},destroy:function(){var e=this.el;e[U]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),oe.splice(oe.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},a(Q,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){G={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:a,off:r,css:l,find:c,is:function(e,t){return!!i(e,t,e)},extend:y,throttle:b,closest:i,toggleClass:s,clone:_,index:v},e.create=function(t,i){return new e(t,i)},e.version="1.6.1",e})},89:function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};!function(){function t(e){function t(e){e.parentElement.removeChild(e)}function i(e,t,i){var n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}function a(e,t){return e.map(function(e){return e.elm}).indexOf(t)}function r(e,t,i){if(!e)return[];var o=e.map(function(e){return e.elm}),a=[].concat(n(t)).map(function(e){return o.indexOf(e)});return i?a.filter(function(e){return-1!==e}):a}function s(e,t){var i=this;this.$nextTick(function(){return i.$emit(e.toLowerCase(),t)})}function l(e){var t=this;return function(i){null!==t.realList&&t["onDrag"+e](i),s.call(t,e,i)}}var c=["Start","Add","Remove","Update","End"],d=["Choose","Sort","Filter","Clone"],u=["Move"].concat(c,d).map(function(e){return"on"+e}),h=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null}},data:function(){return{transitionMode:!1,componentMode:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var i=t[0];i.componentOptions&&"transition-group"===i.componentOptions.tag&&(this.transitionMode=!0)}var o=t,a=this.$slots.footer;return a&&(o=t?[].concat(n(t),n(a)):[].concat(n(a))),e(this.element,null,o)},mounted:function(){var t=this;if(this.componentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.componentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var i={};c.forEach(function(e){i["on"+e]=l.call(t,e)}),d.forEach(function(e){i["on"+e]=s.bind(t,e)});var n=o({},this.options,i,{onMove:function(e,i){return t.onDragMove(e,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new e(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==u.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.componentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=r(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=a(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(n(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var a=n.realList,r={list:a,component:n};if(t!==i&&a&&n.getUnderlyingVm){var s=n.getUnderlyingVm(i);if(s)return o(s,r)}return r},getVmIndex:function(e){var t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),h=e.item},onDragAdd:function(e){var i=e.item._underlying_vm_;if(void 0!==i){t(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,i),this.computeIndexes();var o={element:i,newIndex:n};this.emitChanges({added:o})}},onDragRemove:function(e){if(i(this.rootContainer,e.item,e.oldIndex),this.isCloning)return void t(e.clone);var n=this.context.index;this.spliceList(n,1);var o={element:this.context.element,oldIndex:n};this.resetTransitionData(n),this.emitChanges({removed:o})},onDragUpdate:function(e){t(e.item),i(e.from,e.item,e.oldIndex);var n=this.context.index,o=this.getVmIndex(e.newIndex);this.updatePosition(n,o);var a={element:this.context.element,oldIndex:n,newIndex:o};this.emitChanges({moved:a})},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=[].concat(n(t.to.children)).filter(function(e){return"none"!==e.style.display}),o=i.indexOf(t.related),a=e.component.getVmIndex(o);return-1==i.indexOf(h)&&t.willInsertAfter?a+1:a},onDragMove:function(e,t){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),a=this.context,r=this.computeFutureIndex(n,e);return o(a,{futureIndex:r}),o(e,{relatedContext:n,draggedContext:a}),i(e,t)},onDragEnd:function(e){this.computeIndexes(),h=null}}}}Array.from||(Array.from=function(e){return[].slice.call(e)});var a=i(87);e.exports=t(a)}()},98:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=(n(o),i(8)),r=n(a),s=i(5),l=n(s),c=i(155),d=n(c),u=i(159),h=n(u);t.default={components:{feedsMarkForm:d.default,viewImageDialog:h.default},data:function(){return{activeName:"getRulesData",rulesData:[],feeds:[],dialogTableVisible:!1,viewImageDialogVisible:!1,form:{},viewImages:[]}},mounted:function(){this.getData(),r.default.http(l.default.getFeeds,{},this.then)},methods:{then:function(e,t){switch(t){case l.default.getFeeds.code:this.feeds=e.data;break;case l.default.getFeedsMark.code:this.rulesData=e.data;break;case l.default.setFeedsMark.code:this.closeDialog(),r.default.setCache(l.default.getFeedsMark,""),this.getData()}},getData:function(){r.default.http(l.default.getFeedsMark,{},this.then)},editFeed:function(){},openDialog:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e>-1){var n={};Object.assign(n,t[e]),i&&(n.id="",n.name=n.name+"-[copy]"),this.form=n}else this.form={fid:"",background:{position:{x:0,y:0},size:100,canvas_size:""}};console.log("openDialog",this.form);var o=this;o.dialogTableVisible=!0,setTimeout(function(){o.$refs.feedsMarkForm.initPage()},100)},closeDialog:function(){this.dialogTableVisible=!1},updateDialog:function(){var e=this.$refs.feedsMarkForm.getFormData();console.log("form",e),e&&r.default.http(l.default.setFeedsMark,e,this.then)},upDateFormat:function(e){return e.uptime>0?r.default.date("MM-DD HH时",e.uptime):"-.-"},viewImageDialog:function(e,t){var i=[];t&&(this.viewImagesSrc=t[e].mark_img_path.replace(/-[^\-]{32}-/,"-"),this.viewImagesCount=t[e].count_items),this.viewImages=[];for(var n=parseInt(Math.random()*(this.viewImagesCount-100)),o=n;o<n+100;o++)i.push(this.viewImagesSrc+"/q/"+o+".jpeg");this.viewImageDialogVisible=!0;var a=this;setTimeout(function(){a.viewImages=i},1e3)},closeViewImageDialog:function(){this.viewImageDialogVisible=!1},formatCanvasSize:function(e,t){try{return e.background.canvas_size}catch(e){return""}}}}},99:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=(n(o),i(8)),r=n(a),s=i(5),l=n(s),c=i(158),d=n(c),u=i(156),h=n(u);!function(e,t,i){var n,o=e.getElementsByTagName(t)[0];e.getElementById(i)||(n=e.createElement(t),n.id=i,n.src="//cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.17/fabric.min.js",o.parentNode.insertBefore(n,o))}(document,"script","fabric-jssdk"),t.default={props:["form","feeds"],components:{feedsMarkFormScope:d.default,feedsMarkFormLayers:h.default},data:function(){return{initCanvasInterval:null,rules:{fid:[{required:!0,message:"请选择Feed",trigger:"blur"}],name:[{required:!0,message:"请填写Mark Name",trigger:"blur"}],canvas_size:[{required:!0,message:"请选择画布尺寸",trigger:"blur"}]},canvas:null,object:{text:""},image:{width:0,height:0,url:""},imageStyle:"",background:{},rightController:!0,background_base64:"",canvas_size:"",layers:[]}},mounted:function(){this.mountedInitCanvas(),this.form.fid&&r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)},methods:{mountedInitCanvas:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;"undefined"==typeof fabric?this.initCanvasInterval=setInterval(function(){t.initCanvas(e)},500):t.initCanvas(e)},then:function(e,t){switch(t){case l.default.getFeedsImageInfo.code:this.canvas_size=this.form.background.canvas_size||"",this.image.url=e.data.url,this.imageStyle="background-image: url("+e.data.url+");width:"+this.image.width+"px;height:"+this.image.height+"px;",this.mountedInitCanvas(!1),this.setBackground()}},backgroundImageStyle:function(){var e="border: 1px solid #00f;overflow: hidden;background-repeat: no-repeat;width:"+this.image.width+"px;height:"+this.image.height+"px;";if(this.form.bg_img_path)if(this.form.bg_img_path.indexOf("base64")>-1)e+="background-image: url("+this.form.bg_img_path+");";else{var t=r.default.cgi(this.form.bg_img_path);e+="background-image: url("+t+");"}return e},initPage:function(){console.log("feedsMarkForm.vue","initPage",this.form),this.form.fid?(this.canvas_size=this.form.background.canvas_size||"",r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)):(this.image={width:0,height:0,url:""},this.imageStyle="",this.mountedInitCanvas()),this.$refs.feedsMarkFormScope.initPage(this.form.background)},initCanvas:function(e){if(console.log("initCanvasInterval..."),"undefined"==typeof fabric)return void console.log("initCanvasInterval...");if(clearInterval(this.initCanvasInterval),this.initCanvasInterval=null,this.canvas||(this.canvas=new fabric.Canvas("tu"),this.watchCanvas()),this.canvas.setHeight(this.image.height),this.canvas.setWidth(this.image.width),e&&this.canvas.clear(),this.canvas.renderAll(),this.form.mark_object){var t=this;this.canvas.loadFromJSON(this.form.mark_object,function(){t.canvas.renderAll()})}},flushImage:function(){this.form.mark_object=JSON.stringify(this.canvas),r.default.http(l.default.getFeedsImageInfo,{fid:this.form.fid},this.then)},getFormData:function(){var e=!1;return this.form.canvas_size=this.canvas_size,this.$refs.form.validate(function(t,i){t&&(e=!0)}),this.form.json=JSON.stringify(this.canvas),this.form.image_base64=this.toImage(),this.background.image=this.image,this.background.canvas_size=this.canvas_size,this.form.background=JSON.stringify(this.background),e?this.form:(r.default.toast("请完善信息"),!1)},feedChange:function(e){e&&r.default.http(l.default.getFeedsImageInfo,{fid:e},this.then)},canvasSizeChange:function(e){e=e.split("x"),2==e.length&&(this.image.width=e[0],this.image.height=e[1],this.imageStyle="background-image: url("+this.image.url+");width:"+this.image.width+"px;height:"+this.image.height+"px;",this.mountedInitCanvas(!1),this.setBackground())},pad:function(e,t){for(;e.length<t;)e="0"+e;return e},getRandomColor:function(){var e=fabric.util.getRandomInt;return this.pad(e(0,255).toString(16),2)+this.pad(e(0,255).toString(16),2)+this.pad(e(0,255).toString(16),2)},addTextbox:function(){var e=fabric.util.getRandomInt,t=new fabric.Textbox("请输入内容,\n请输入内容",{fontSize:20,left:e(0,this.image.width/2),top:e(0,this.image.height/2),fontFamily:"helvetica",angle:0,fill:"#"+this.getRandomColor(),fontWeight:"",originX:"left",width:parseInt(this.image.width/2),hasRotatingPoint:!0,centerTransform:!0});t.onKeyDown(function(){console.log("textSample-change",arguments)}),this.canvas.add(t)},watchCanvas:function(){this.canvas.on("mouse:up",this.$refs.feedsMarkFormScope.updateScope).on("object:selected",this.$refs.feedsMarkFormScope.updateScope)},toImage:function(e){if(fabric.Canvas.supports("toDataURL")){return this.canvas.toDataURL({multiplier:e,format:"png"})}r.default.alert("This browser doesn't provide means to serialize canvas to an image")},getFilePath:function(e){console.log(arguments),e=e.target;var t="file_bg"==e.id,i=e.files[0];if(i){var n=this,o=new FileReader;o.onload=function(e){console.log("reader.onload",e.target),t?n.form.bg_img_path=e.target.result:fabric.Image.fromURL(e.target.result,function(e){if(console.log("fabric.Image.fromURL.onload",e),!(e.width<1||e.height<1)){var t=1;n.image.width<e.width&&(t=n.image.width/e.width),e.set({left:0,top:0,angle:0}).scale(t).setCoords(),n.canvas.add(e)}})},o.readAsDataURL(i)}},addShapeRect:function(){this.canvas.add(new fabric.Rect({left:parseInt(this.canvas.width/3),top:parseInt(this.canvas.height/3),fill:"#"+this.getRandomColor(),width:this.canvas.width/3,height:this.canvas.height/3,opacity:1}))},addShapeLine:function(){this.canvas.add(new fabric.Line([0,parseInt(this.canvas.height/2),this.canvas.width,parseInt(this.canvas.height/2)],{left:0,top:parseInt(this.canvas.height/2),stroke:"#"+this.getRandomColor(),strokeWidth:5}))},addShapeCircle:function(){this.canvas.add(new fabric.Circle({left:0,top:0,fill:"#"+this.getRandomColor(),radius:parseInt(this.canvas.height/3),opacity:1}))},addShapeTriangle:function(){this.canvas.add(new fabric.Triangle({left:parseInt(this.canvas.width/3),top:parseInt(this.canvas.height/3),fill:"#"+this.getRandomColor(),width:parseInt(this.canvas.width/3),height:parseInt(this.canvas.height/3),opacity:1}))},setBackground:function(){if(this.background=this.$refs.feedsMarkFormScope.background,this.imageStyle){var e=(this.background.size&&this.background.size,parseInt(800*this.background.size/100));this.imageStyle+="background-repeat:no-repeat;background-size:"+e+"px "+e+"px;background-position-x:"+this.background.position.x+"px;background-position-y:"+this.background.position.y+"px;"}},toggleRightController:function(){this.rightController=!this.rightController}}}}});
//# sourceMappingURL=1.build.js.map?ec25708f5a0658ef2757