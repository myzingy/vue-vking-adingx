webpackJsonp([8],{118:function(e,t,a){a(601);var r=a(2)(a(568),a(592),null,null);e.exports=r.exports},568:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=(r(o),a(6)),n=r(l),s=a(0),i=r(s),u=a(8),c=a(5),m=r(c),d=a(4),p=r(d);i.default.use(n.default),t.default={data:function(){return{activeName:"getRulesLog",rulesLog:[],popover_img_src:"",total:0,inputTagValue:"",editor:!1,formSearch:{keyword:"",limit:30,offset:0,dataType:"lifetime",assetType:"",brand:""},authors:[],authors_flag:!1}},computed:(0,u.mapState)({user:function(e){return e.user}}),mounted:function(){this.editor=location.hash.indexOf("editor")>0,this.getData()},methods:{getData:function(){this.authors_flag=!1,m.default.http(p.default.assetsGetData,this.formSearch,this.then)},then:function(e,t){switch(t){case p.default.assetsGetData.code:this.rulesLog=e.data,this.total=parseInt(e.total);break;case p.default.assetsSetAuthor.code:case p.default.assetsSetSkus.code:}},handleTabClick:function(e){var t=e.name,a={};"getRulesLog"==t&&m.default.http(p.default[t],a,this.then)},numberFormat:function(e,t){var a=arguments[1].columnKey;return m.default.numberFormat(e[a],2,"")},numberFormatPer:function(e,t){var a=arguments[1].columnKey;return isFinite(e[a])?m.default.numberFormat(e[a],2,"")+"%":e[a]},numberFormatInt:function(e,t){var a=arguments[1].columnKey;return m.default.numberFormat(e[a],0,"")},moneyFormat:function(e,t){var a=arguments[1].columnKey;return m.default.numberFormat(e[a])},CostperResult:function(e,t){if(0==e.websitepurchases)return"X";var a=e.amountspent/e.websitepurchases;return m.default.numberFormat(a)},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return a.length<2?[]:(t.forEach(function(e,t){if(0!==t){if(1===t)return void(r[t]="共计("+a.length+")条");if(e.columnKey){var o=a.map(function(t){return Number(t[e.columnKey]?t[e.columnKey].toString().replace(/[\$,]+/g,""):t[e.columnKey])});o.every(function(e){return isNaN(e)})?r[t]="":(r[t]=o.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),[2,6,8,12,13,19].indexOf(t)>-1?r[t]=m.default.numberFormat(r[t],0,""):[5,7].indexOf(t)>-1?r[t]=m.default.numberFormat(r[t]):r[t]="")}}}),r)},handleSizeChange:function(){console.log(arguments)},handleCurrentChange:function(e){this.formSearch.offset=(e-1)*this.formSearch.limit,this.getData()},setAuthorFlag:function(){this.authors_flag=!0},setAuthor:function(e,t){this.authors_flag&&m.default.http(p.default.assetsSetAuthor,{author:e,id:t.id},this.then)},handleCloseTag:function(e,t){var a=this;this.rulesLog.map(function(r){if(r.id==e)return console.log("handleCloseTag-item",r.id),r.skus.splice(r.skus.indexOf(t),1),m.default.http(p.default.assetsSetSkus,{skus:r.skus.join(","),id:e},a.then),r})},showTagInput:function(e){this.rulesLog.map(function(t){if(t.id==e)return console.log("showTagInput-item",t.id),t.inputVisible=!0,t})},handleInputConfirm:function(e){var t=this,a=this,r=this.inputTagValue;this.rulesLog.map(function(o){if(o.id==e)return console.log("handleInputConfirm-item",o.id,r),r&&(o.skus.push(r),m.default.http(p.default.assetsSetSkus,{skus:o.skus.join(","),id:e},a.then)),o.inputVisible=!1,t.inputTagValue="",o})},onClearFormSearch:function(){this.formSearch.keyword="",this.getData()},onFormSearch:function(){this.getData()}}}},583:function(e,t,a){t=e.exports=a(1)(),t.push([e.i,".el-table__expanded-cell{padding-top:0;padding-bottom:0}.el-table .cell,.el-table th>div{padding-left:3px;padding-right:3px}.el-table th>.cell{overflow:hidden;height:30px}.val{color:#f33;display:inline-block;padding-right:20px}tth:hover div.cell{position:fixed;z-index:99;color:#33f;margin-top:-15px;left:15px}.el-table .caret-wrapper{position:static}.el-table th>.cell{text-indent:15px}.debug{display:none}",""])},592:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",{staticStyle:{width:"100px"}},[a("el-select",{attrs:{placeholder:"全部品牌"},on:{change:e.onFormSearch},model:{value:e.formSearch.brand,callback:function(t){e.formSearch.brand=t},expression:"formSearch.brand"}},[a("el-option",{attrs:{label:"全部品牌",value:""}}),e._v(" "),a("el-option",{attrs:{label:"Jeulia",value:"jeulia"}}),e._v(" "),a("el-option",{attrs:{label:"Gnoce",value:"gnoce"}})],1)],1),e._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"AccountId / Author / SKU / Filename"},model:{value:e.formSearch.keyword,callback:function(t){e.formSearch.keyword=t},expression:"formSearch.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onFormSearch}},[e._v("查询")]),e._v(" "),a("a",{attrs:{href:"javascript://"},on:{click:e.onClearFormSearch}},[e._v("清空条件")])],1),e._v(" "),a("el-form-item",[a("el-radio-group",{on:{change:e.onFormSearch},model:{value:e.formSearch.dataType,callback:function(t){e.formSearch.dataType=t},expression:"formSearch.dataType"}},[a("el-radio-button",{attrs:{label:"lifetime"}},[e._v("Lifetime")]),e._v(" "),a("el-radio-button",{attrs:{label:"last_7day"}},[e._v("Last 7 Day")]),e._v(" "),a("el-radio-button",{attrs:{label:"last_14day"}},[e._v("Last 14 Day")])],1)],1),e._v(" "),a("el-form-item",[a("el-radio-group",{on:{change:e.onFormSearch},model:{value:e.formSearch.assetType,callback:function(t){e.formSearch.assetType=t},expression:"formSearch.assetType"}},[a("el-radio-button",{attrs:{label:""}},[e._v("All Assets")]),e._v(" "),a("el-radio-button",{attrs:{label:"0"}},[e._v("Images")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("Videos")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rulesLog,border:"","max-height":"700","default-sort":{prop:"amountspent",order:"descending"},"summary-method":e.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("Updated Time:"),a("span",{staticClass:"val"},[e._v(e._s(t.row.updated_time))])]),e._v(" "),a("span",[e._v("Size:"),a("span",{staticClass:"val"},[e._v(e._s(t.row.original_width)+" x "+e._s(t.row.original_height))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.list,border:""}},[a("el-table-column",{attrs:{prop:"account_id",label:"Ad Account",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"websiteaddstocart",label:"Website Adds to Cart",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"costperwebsiteaddtocart",label:"Cost per Website Add to Cart",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"amountspent",label:"Spent",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"websitepurchases",label:"Website Purchases",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"websitepurchasesconversionvalue",label:"Website Purchases Conversion Value",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"linkclicks",label:"Link Clicks",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"cpc",label:"CPC (Cost per Link Click)",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"ctr",label:"CTR (Link Click-Through Rate)",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"cpm1000",label:"CPM (Cost per 1,000 Impressions)",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"reach",label:"Reach",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"results",label:"Results",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.CostperResult,columnKey:"costperresult",label:"Cost per Result",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"impressions",label:"Impressions",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormat,columnKey:"frequency",label:"Frequency",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormat,columnKey:"relevance_score",label:"Relevent Score",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positive_feedback",label:"Positive Feedback",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"negative_feedback",label:"Negative Feedback",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ads_num",columnKey:"ads_num",label:"广告数",width:"70",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"conversion_rate",prop:"conversion_rate",label:"转化率",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"roas",prop:"roas",label:"ROAS",width:"70"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"Thumb",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",title:"",width:"400",trigger:"hover"}},[a("div",["1"==t.row.type?a("span",[e._v("Video:")]):a("span",[e._v("Image:")]),e._v(" "),a("span",[e._v("Updated Time:"),a("span",{staticClass:"val"},[e._v(e._s(t.row.updated_time))])]),e._v(" "),a("span",[e._v("Size:"),a("span",{staticClass:"val"},[e._v(e._s(t.row.original_width)+" x "+e._s(t.row.original_height))])]),e._v(" "),a("br"),e._v(" "),a("img",{attrs:{width:"400",src:t.row.permalink_url}}),e._v(" "),a("div",{staticClass:"debug"},[a("p",[e._v("\n                                http://www.vking.com/facebook_ads/wwwroot/apido/asyn.getAssetForAd?debug=true&ac_id="+e._s(t.row.account_id)+"&ad_id="+e._s(t.row.ad_id)+"\n                            ")]),e._v(" "),"1"==t.row.type?a("p",[e._v("\n                                http://www.vking.com/facebook_ads/wwwroot/apido/asyn.getAssetsVideoInfo?debug=true&ac_id="+e._s(t.row.account_id)+"&video_id="+e._s(t.row.id)+"\n                            ")]):a("p",[e._v("\n                                http://www.vking.com/facebook_ads/wwwroot/apido/asyn.getAssetsImageInfo?debug=true&ac_id="+e._s(t.row.account_id)+"&hashes="+e._s(t.row.hash)+"\n                            ")])])]),e._v(" "),a("a",{attrs:{href:t.row.url,target:"_blank"},slot:"reference"},[t.row.permalink_url?a("img",{attrs:{height:"100",src:t.row.permalink_url}}):a("span",[e._v(e._s(t.row.name))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"websiteaddstocart",prop:"websiteaddstocart",label:"Website Adds to Cart",width:"80",className:"autotooltip",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"costperwebsiteaddtocart",prop:"costperwebsiteaddtocart",label:"Cost per Website Add to Cart",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"websiteaddstocartconversionvalue",prop:"websiteaddstocartconversionvalue",label:"Website Adds to Cart Conversion Value",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"amountspent",prop:"amountspent",label:"Spent",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"websitepurchases",prop:"websitepurchases",label:"Website Purchases",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"websitepurchasesconversionvalue",prop:"websitepurchasesconversionvalue",label:"Website Purchases Conversion Value",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"linkclicks",prop:"linkclicks",label:"Link Clicks",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"cpc",prop:"cpc",label:"CPC (Cost per Link Click)",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"ctr",prop:"ctr",label:"CTR (Link Click-Through Rate)",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.moneyFormat,columnKey:"cpm1000",prop:"cpm1000",label:"CPM (Cost per 1,000 Impressions)",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"reach",prop:"reach",label:"Reach",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"results",prop:"results",label:"Results",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.CostperResult,columnKey:"costperresult",prop:"costperresult",label:"Cost per Result",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatInt,columnKey:"impressions",prop:"impressions",label:"Impressions",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormat,columnKey:"frequency",prop:"frequency",label:"Frequency",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormat,columnKey:"relevance_score",prop:"relevance_score",label:"Relevent Score",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"positive_feedback",label:"Positive Feedback",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"negative_feedback",label:"Negative Feedback",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ads_num",columnKey:"ads_num",label:"广告数",width:"70",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"conversion_rate",prop:"conversion_rate",label:"转化率",width:"70",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.numberFormatPer,columnKey:"roas",prop:"roas",label:"ROAS",width:"70",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"Author",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editor?a("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择"},on:{change:function(a){e.setAuthor(t.row.author,t.row)},"visible-change":e.setAuthorFlag},model:{value:t.row.author,callback:function(e){t.row.author=e},expression:"scope.row.author"}},e._l(e.authors,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})):a("span",[e._v(e._s(t.row.author))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"SKUS",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editor?a("div",[e._l(t.row.skus,function(r){return a("el-tag",{key:r,staticStyle:{margin:"3px"},attrs:{closable:!0,"close-transition":!1},on:{close:function(a){e.handleCloseTag(t.row.id,r)}}},[e._v("\n                    "+e._s(r)+"\n                ")])}),e._v(" "),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:function(a){e.handleInputConfirm(t.row.id)}},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13))return null;e.handleInputConfirm(t.row.id)}},model:{value:e.inputTagValue,callback:function(t){e.inputTagValue=t},expression:"inputTagValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){e.showTagInput(t.row.id)}}},[e._v("+\n                    Sku")])],2):e._l(t.row.skus,function(t){return a("el-tag",{key:t,staticStyle:{margin:"3px"}},[e._v("\n                    "+e._s(t)+"\n                ")])})]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{margin:"20px auto",width:"300px"},attrs:{"page-size":e.formSearch.limit,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]}},601:function(e,t,a){var r=a(583);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(3)("024f632c",r,!0)}});
//# sourceMappingURL=8.build.js.map?be14ad23d6e12046abb0