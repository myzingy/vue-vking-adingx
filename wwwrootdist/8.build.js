webpackJsonp([8],{117:function(t,e,a){a(600);var r=a(2)(a(567),a(591),null,null);t.exports=r.exports},567:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(7),l=(r(o),a(6)),n=r(l),s=a(0),i=r(s),u=a(8),c=a(5),m=r(c),d=a(4),h=r(d);i.default.use(n.default),e.default={data:function(){return{activeName:"getRulesLog",rulesLog:[],popover_img_src:"",total:0,inputTagValue:"",editor:!1,formSearch:{keyword:"",limit:30,offset:0},authors:[]}},computed:(0,u.mapState)({user:function(t){return t.user}}),mounted:function(){this.editor=location.hash.indexOf("editor")>0,this.getData()},methods:{getData:function(){m.default.http(h.default.assetsGetData,this.formSearch,this.then)},then:function(t,e){switch(e){case h.default.assetsGetData.code:this.rulesLog=t.data,this.total=parseInt(t.total);break;case h.default.assetsSetAuthor.code:case h.default.assetsSetSkus.code:}},handleTabClick:function(t){var e=t.name,a={};"getRulesLog"==e&&m.default.http(h.default[e],a,this.then)},numberFormat:function(t,e){var a=arguments[1].columnKey;return m.default.numberFormat(t[a],2,"")},numberFormatPer:function(t,e){var a=arguments[1].columnKey;return isFinite(t[a])?m.default.numberFormat(t[a],2,"")+"%":t[a]},numberFormatInt:function(t,e){var a=arguments[1].columnKey;return m.default.numberFormat(t[a],0,"")},moneyFormat:function(t,e){var a=arguments[1].columnKey;return m.default.numberFormat(t[a])},CostperResult:function(t,e){if(0==t.websitepurchases)return"X";var a=t.amountspent/t.websitepurchases;return m.default.numberFormat(a)},getSummaries:function(t){var e=t.columns,a=t.data,r=[];return a.length<2?[]:(e.forEach(function(t,e){if(0!==e){if(1===e)return void(r[e]="共计("+a.length+")条");if(t.columnKey){var o=a.map(function(e){return Number(e[t.columnKey]?e[t.columnKey].toString().replace(/[\$,]+/g,""):e[t.columnKey])});o.every(function(t){return isNaN(t)})?r[e]="":(r[e]=o.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),[2,6,8,12,13,19].indexOf(e)>-1?r[e]=m.default.numberFormat(r[e],0,""):[5,7].indexOf(e)>-1?r[e]=m.default.numberFormat(r[e]):r[e]="")}}}),r)},handleSizeChange:function(){console.log(arguments)},handleCurrentChange:function(t){this.formSearch.offset=(t-1)*this.formSearch.limit,this.getData()},setAuthor:function(t,e){m.default.http(h.default.assetsSetAuthor,{author:t,id:e.id},this.then)},handleCloseTag:function(t,e){var a=this;this.rulesLog.map(function(r){if(r.id==t)return console.log("handleCloseTag-item",r.id),r.skus.splice(r.skus.indexOf(e),1),m.default.http(h.default.assetsSetSkus,{skus:r.skus.join(","),id:t},a.then),r})},showTagInput:function(t){this.rulesLog.map(function(e){if(e.id==t)return console.log("showTagInput-item",e.id),e.inputVisible=!0,e})},handleInputConfirm:function(t){var e=this,a=this,r=this.inputTagValue;this.rulesLog.map(function(o){if(o.id==t)return console.log("handleInputConfirm-item",o.id,r),r&&(o.skus.push(r),m.default.http(h.default.assetsSetSkus,{skus:o.skus.join(","),id:t},a.then)),o.inputVisible=!1,e.inputTagValue="",o})},onClearFormSearch:function(){this.formSearch.keyword="",this.getData()},onFormSearch:function(){this.getData()}}}},582:function(t,e,a){e=t.exports=a(1)(),e.push([t.i,".el-table__expanded-cell{padding-top:0;padding-bottom:0}.el-table .cell,.el-table th>div{padding-left:3px;padding-right:3px}.el-table th>.cell{overflow:hidden;height:30px}.val{color:#f33;display:inline-block;padding-right:20px}tth:hover div.cell{position:fixed;z-index:99;color:#33f;margin-top:-15px;left:15px}",""])},591:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"AccountId / Author / SKU / Filename"},model:{value:t.formSearch.keyword,callback:function(e){t.formSearch.keyword=e},expression:"formSearch.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onFormSearch}},[t._v("查询")]),t._v(" "),a("a",{attrs:{href:"javascript://"},on:{click:t.onClearFormSearch}},[t._v("清空条件")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rulesLog,border:"","max-height":"700","default-sort":{prop:"amountspent",order:"descending"},"summary-method":t.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("Updated Time:"),a("span",{staticClass:"val"},[t._v(t._s(e.row.updated_time))])]),t._v(" "),a("span",[t._v("Size:"),a("span",{staticClass:"val"},[t._v(t._s(e.row.original_width)+" x "+t._s(e.row.original_height))])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.list,border:""}},[a("el-table-column",{attrs:{prop:"account_id",label:"Ad Account",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"websiteaddstocart",label:"Website Adds to Cart",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"costperwebsiteaddtocart",label:"Cost per Website Add to Cart",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"amountspent",label:"Spent",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"websitepurchases",label:"Website Purchases",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"websitepurchasesconversionvalue",label:"Website Purchases Conversion Value",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"linkclicks",label:"Link Clicks",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"cpc",label:"CPC (Cost per Link Click)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"ctr",label:"CTR (Link Click-Through Rate)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"cpm1000",label:"CPM (Cost per 1,000 Impressions)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"reach",label:"Reach",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"results",label:"Results",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.CostperResult,columnKey:"costperresult",label:"Cost per Result",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormat,columnKey:"frequency",label:"Frequency",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormat,columnKey:"relevance_score",label:"Relevent Score",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positive_feedback",label:"Positive Feedback",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"negative_feedback",label:"Negative Feedback",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"conversion_rate",prop:"conversion_rate",label:"转化率",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"roas",prop:"roas",label:"ROAS",width:"50"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"Name",showTooltipWhenOverflow:!0,fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",title:"",width:"400",trigger:"hover"}},[a("div",["1"==e.row.type?a("span",[t._v("Video:")]):a("span",[t._v("Image:")]),t._v(" "),a("span",[t._v("Updated Time:"),a("span",{staticClass:"val"},[t._v(t._s(e.row.updated_time))])]),t._v(" "),a("span",[t._v("Size:"),a("span",{staticClass:"val"},[t._v(t._s(e.row.original_width)+" x "+t._s(e.row.original_height))])]),t._v(" "),a("br"),t._v(" "),a("img",{attrs:{width:"400",src:e.row.permalink_url}})]),t._v(" "),a("a",{attrs:{href:e.row.url,target:"_blank"},slot:"reference"},[1==e.row.type?a("i",{staticClass:"el-icon-star-on"}):a("i",{staticClass:"el-icon-picture"}),t._v("\n                        "+t._s(e.row.name)+"\n                    ")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"websiteaddstocart",label:"Website Adds to Cart",width:"80",className:"autotooltip"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"costperwebsiteaddtocart",label:"Cost per Website Add to Cart",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"websiteaddstocartconversionvalue",label:"Website Adds to Cart Conversion Value",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"amountspent",prop:"amountspent",label:"Spent",width:"80",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"websitepurchases",label:"Website Purchases",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"websitepurchasesconversionvalue",label:"Website Purchases Conversion Value",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"linkclicks",label:"Link Clicks",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"cpc",label:"CPC (Cost per Link Click)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"ctr",label:"CTR (Link Click-Through Rate)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.moneyFormat,columnKey:"cpm1000",label:"CPM (Cost per 1,000 Impressions)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"reach",label:"Reach",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatInt,columnKey:"results",label:"Results",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.CostperResult,columnKey:"costperresult",label:"Cost per Result",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormat,columnKey:"frequency",label:"Frequency",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormat,columnKey:"relevance_score",label:"Relevent Score",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positive_feedback",label:"Positive Feedback",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"negative_feedback",label:"Negative Feedback",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ads_num",columnKey:"ads_num",label:"广告数",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"conversion_rate",prop:"conversion_rate",label:"转化率",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.numberFormatPer,columnKey:"roas",prop:"roas",label:"ROAS",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"Author",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.editor?a("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择"},on:{change:function(a){t.setAuthor(e.row.author,e.row)}},model:{value:e.row.author,callback:function(t){e.row.author=t},expression:"scope.row.author"}},t._l(t.authors,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})):a("span",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"SKUS",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.editor?a("div",[t._l(e.row.skus,function(r){return a("el-tag",{key:r,staticStyle:{margin:"3px"},attrs:{closable:!0,"close-transition":!1},on:{close:function(a){t.handleCloseTag(e.row.id,r)}}},[t._v("\n                    "+t._s(r)+"\n                ")])}),t._v(" "),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:function(a){t.handleInputConfirm(e.row.id)}},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13))return null;t.handleInputConfirm(e.row.id)}},model:{value:t.inputTagValue,callback:function(e){t.inputTagValue=e},expression:"inputTagValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){t.showTagInput(e.row.id)}}},[t._v("+\n                    Sku")])],2):t._l(e.row.skus,function(e){return a("el-tag",{key:e,staticStyle:{margin:"3px"}},[t._v("\n                    "+t._s(e)+"\n                ")])})]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px auto",width:"300px"},attrs:{"page-size":t.formSearch.limit,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]}},600:function(t,e,a){var r=a(582);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(3)("024f632c",r,!0)}});
//# sourceMappingURL=8.build.js.map?ce3caf32fdc30fe7af1f