webpackJsonp([11],{104:function(t,n,e){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},a=e(0),r=o(a),s=e(11),l=e(19),u=e(87),c=o(u),f=e(8),m=o(f),d=e(5),p=o(d);window.fbAsyncInit=function(){FB.init({appId:"104147746842860",cookie:!0,xfbml:!0,version:"v2.9"})},window.onerror=function(){m.default.toast("Fackbook login fail,Please try again or refresh the page!")},function(t,n,e){var o,i=t.getElementsByTagName(n)[0];t.getElementById(e)||(o=t.createElement(n),o.id=e,o.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk"),r.default.use(c.default),n.default={data:function(){return{btn:!1,form:{id:"",name:"",email:"",token:""},fbSignInParams:{scope:"email,ads_management,ads_read,manage_pages,read_insights",return_scopes:!0},emailInputFlag:!1}},methods:i({},(0,s.mapActions)([l.USER_SIGNIN]),{then:function(t,n){switch(n){case p.default.login.code:if(404==t.code)return void(this.emailInputFlag=!0);this.USER_SIGNIN(this.form),this.$router.replace({path:"/home"})}},submit:function(){return this.btn=!0,this.form.id&&this.form.name&&this.form.email&&this.form.token?this.form.email.indexOf("@")<0?void m.default.alert("email 格式错误"):void m.default.http(p.default.login,this.form,this.then):void m.default.alert("Facebook 授权信息错误")},onSignInSuccess:function(t){var n=this;console.log("login",t);var e=t.authResponse.accessToken;FB.api("/me?fields=id,name,email",function(t){console.log("Good to see you, "+t.name+".",t),n.form=t,n.form.token=e,m.default.http(p.default.login,n.form,n.then)})},onSignInError:function(t){console.log("OH NOES",t)},logout:function(){FB.logout(function(t){console.log("logout",t)})}})}},134:function(t,n,e){n=t.exports=e(1)(),n.push([t.i,".login{padding:50px;text-align:center}.login .line{padding:5px}.login .line input{padding:0 10px;line-height:28px}.login button{padding:0 20px;margin-top:20px;line-height:28px}.fb-signin-button{display:inline-block;padding:20px;border-radius:5px;background-color:#4267b2;color:#fff}",""])},177:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("v-header",{attrs:{title:"登录"}},[e("router-link",{attrs:{to:"?"},slot:"left"})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.btn&&!t.emailInputFlag,expression:"!btn && !emailInputFlag"}],staticClass:"login"},[e("fb-signin-button",{attrs:{params:t.fbSignInParams},on:{success:t.onSignInSuccess,error:t.onSignInError}},[t._v("\n\t\t\tSign in with Facebook\n\t\t")])],1),t._v(" "),e("form",{directives:[{name:"show",rawName:"v-show",value:t.emailInputFlag,expression:"emailInputFlag"}],staticClass:"login",on:{submit:function(n){n.preventDefault(),t.submit(n)}}},[e("div",{staticClass:"line"},[e("div",[t._v("Facebook Email 获取失败,请手动填写")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"text",placeholder:"输入你的Facebook Email"},domProps:{value:t.form.email},on:{input:function(n){n.target.composing||(t.form.email=n.target.value)}}})]),t._v(" "),e("button",[t._v("登录")])])],1)},staticRenderFns:[]}},200:function(t,n,e){var o=e(134);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(4)("16577384",o,!0)},68:function(t,n,e){e(200);var o=e(2)(e(104),e(177),null,null);t.exports=o.exports},87:function(t,n,e){"use strict";var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function e(t){t.component("fb-signin-button",{name:"fb-signin-button",render:function(t){return t("div",{attrs:{class:"fb-signin-button"},ref:"signinBtn"},this.$slots.default)},props:{params:{type:Object,required:!0,default:function(){return{}}}},mounted:function(){var t=this;this.$refs.signinBtn.addEventListener("click",function(){window.FB.login(function(n){t.$emit(n.authResponse?"success":"error",n)},t.params)})}})}"object"==a(n)?t.exports=e:(o=[],void 0!==(i=function(){return e}.apply(n,o))&&(t.exports=i))}()}});
//# sourceMappingURL=11.build.js.map?d2f30452cd978c33c62d